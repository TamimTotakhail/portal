(globalThis.webpackChunkcalypso=globalThis.webpackChunkcalypso||[]).push([[80489],{"../node_modules/deep-freeze/index.js":e=>{e.exports=function e(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach((function(s){!t.hasOwnProperty(s)||null===t[s]||"object"!=typeof t[s]&&"function"!=typeof t[s]||Object.isFrozen(t[s])||e(t[s])})),t}},"./blocks/app-banner/utils.js":(e,t,s)=>{"use strict";s.d(t,{AK:()=>u,Nj:()=>c,Sd:()=>p,bx:()=>d,ct:()=>l,d7:()=>f,jc:()=>a,lt:()=>y,tW:()=>j,yv:()=>n,zE:()=>Z});var o=s("../node_modules/lodash-es/includes.js"),i=s("../node_modules/lodash-es/reduce.js"),r=s("../node_modules/lodash-es/get.js");const a="appBannerDismissTimes",n="gutenberg-editor",d="notifications",l="reader",c="stats",p="home",u=[n,d,l,c,p],h=12096e5,m=864e5,g={title:"",copy:"",icon:""};function f(e,t,s){switch(t){case n:return{title:e("Rich mobile publishing."),copy:e("A streamlined editor with faster, simpler image uploading? Check and mate."),icon:`/calypso/animations/app-promo/wp-to-jp${s?"-rtl":""}.json`};case d:return{title:e("Watch engagement happening."),copy:e("Is your new post a hit? With push notifications, see reactions as they roll in."),icon:`/calypso/animations/app-promo/jp-notifications${s?"-rtl":""}.json`};case l:return{title:e("Read posts, even offline."),copy:e("Catch up with new posts on the go or save them to read offline."),icon:`/calypso/animations/app-promo/jp-reader${s?"-rtl":""}.json`};case c:return{title:e("Stats at your fingertips."),copy:e("See your real-time stats anytime, anywhere."),icon:`/calypso/animations/app-promo/jp-stats${s?"-rtl":""}.json`};case p:return{title:e("The Jetpack app makes WordPress better."),copy:e("Everything you need to write, publish, and manage a world-class site."),icon:`/calypso/animations/app-promo/wp-to-jp${s?"-rtl":""}.json`};default:return g}}function y(e,t){return t?d:(0,o.Z)(u,e)?e:null}function j(e,t){const s=function(){const e=Date.now();return{longerDuration:e+h,shorterDuration:e+m}}();return(0,i.Z)(u,((o,i)=>(o[i]=i===e?s.longerDuration:(0,r.Z)(t,i,-1/0)>s.shorterDuration?(0,r.Z)(t,i):s.shorterDuration,o)),{})}const Z=(e,t)=>(0,r.Z)(e,t,-1/0)>Date.now()},"./gutenberg/editor/index.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Je});var o=s("../node_modules/page/page.js"),i=s.n(o),r=s("./controller/index.web.js"),a=s("./my-sites/controller.js"),n=s("../packages/calypso-config/src/index.ts"),d=s("./lib/url/add-query-args.ts"),l=s("./lib/route/path.ts"),c=s("./state/action-types.ts"),p=s("./state/admin-menu/actions/index.js"),u=s("./state/admin-menu/selectors/index.js"),h=s("./state/current-user/selectors.js"),m=s("./state/editor/actions.js"),g=s("./state/selected-editor/actions.js"),f=s("./state/selectors/get-editor-url.ts"),y=s("./state/selectors/get-selected-editor.js"),j=s("./state/selectors/get-site-editor-url.js"),Z=s("./state/selectors/is-site-automated-transfer.ts"),_=s("./state/selectors/should-load-gutenframe.js"),w=s("./state/sites/actions.js"),b=s("./state/sites/selectors/get-site-option.ts"),I=s("./state/sites/selectors/is-jetpack-site.ts"),v=s("./state/selectors/get-raw-site.ts");function P(e,t){const s=(0,v.Z)(e,t);return s?s?.options?.active_modules?.includes("sso"):null}var k=s("./state/sites/selectors/get-site-admin-url.ts"),S=s("./state/ui/selectors/get-selected-site-id.js"),T=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),x=s("../node_modules/@wordpress/url/build-module/get-query-arg.js"),M=s("../packages/i18n-calypso/src/localize.js"),E=s("../node_modules/lodash-es/map.js"),C=s("../node_modules/lodash-es/pickBy.js"),q=s("../node_modules/lodash-es/flowRight.js"),R=s("../node_modules/react/index.js"),B=s("../node_modules/react-redux/es/index.js"),D=s("./components/async-load/index.jsx"),$=s("./data/block-editor/with-block-editor-settings.js"),A=s("./lib/analytics/hotjar.js"),L=s("./lib/analytics/page-view-tracker/index.jsx"),O=s("./lib/memoize-last/index.ts"),U=s("./lib/navigate/index.ts"),N=s("./lib/performance-tracking/index.web.ts"),V=s("./lib/protect-form/index.tsx"),z=s("./lib/wp/browser.js"),F=s("./components/data/document-head/index.jsx"),G=s("./components/data/query-post-types/index.jsx"),W=s("./state/editor/selectors.ts"),Y=s("./state/post-types/selectors.js"),H=s("./state/posts/selectors/get-edited-post-value.js"),X=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const K=(0,B.$j)((e=>{const t=(0,S.Z)(e),s=(0,W.BN)(e),o=(0,H.r)(e,t,s,"type");return{siteId:t,type:o,typeObject:(0,Y.z_)(e,t,o),newPost:(0,W.To)(e)}}))((0,M.Z)((function({translate:e,siteId:t,type:s,typeObject:o,newPost:i}){let r;return r="post"===s?e(i?"New Post":"Edit Post",{textOnly:!0}):"page"===s?e(i?"New Page":"Edit Page",{textOnly:!0}):i?o?o.labels.new_item:e("New",{textOnly:!0}):o?o.labels.edit_item:e("Edit",{context:"verb",textOnly:!0}),(0,X.BX)("div",{children:[t&&"page"!==s&&"post"!==s&&(0,X.tZ)(G.Z,{siteId:t}),(0,X.tZ)(F.Z,{title:r})]})})));var Q=s("./state/media/actions.js"),J=s("../node_modules/debug/src/browser.js");const ee=s.n(J)()("calypso:media");var te=s("./state/media/thunks/get-media-item.js"),se=s("./state/posts/actions/edit-post.js"),oe=s("./state/posts/actions/trash-post.js"),ie=s("./state/posts/revisions/actions.js"),re=s("./state/route/actions.js"),ae=s("./state/selectors/get-current-route.js"),ne=s("../packages/i18n-calypso/src/index.js");const de=e=>e?.route?.lastNonEditorRoute||"";var le=s("../node_modules/lodash-es/get.js"),ce=s("./state/sites/selectors/get-site-slug.js"),pe=s("./state/sites/selectors/is-single-user-site.js");const ue=(e,t)=>{const s=(0,S.Z)(e),o=(0,ce.Z)(e,s),i=(0,I.Z)(e,s),r=(0,pe.Z)(e,s),a=(0,le.Z)({page:"pages",post:"posts"},t,`types/${t}`);return"post"!==t||i||r?`/${a}/${o}`:`/${a}/my/${o}`};const he=(e,t)=>{const s=(0,S.Z)(e),o=(0,ce.Z)(e,s),i=(0,I.Z)(e,s),r=(0,pe.Z)(e,s),a=(0,le.Z)({page:"pages",post:"posts"},t,`types/${t}`);return"post"!==t||i||r?`/${a}/trashed/${o}`:`/${a}/my/trashed/${o}`};var me=s("./state/selectors/get-site-url.js"),ge=s("./state/selectors/is-site-wpforteams.js"),fe=s("./state/selectors/is-unlaunched-site.js"),ye=s("./state/selectors/is-user-registration-days-within-range.js"),je=s("./state/selectors/should-display-app-banner.ts"),Ze=s("./state/sites/selectors/is-requesting-site.js"),_e=s("./state/sites/selectors/get-customizer-url.ts"),we=s("./state/sites/selectors/get-site.js"),be=s("./state/ui/selectors/get-selected-site-slug.js");s("./state/ui/init.js");function Ie(e){return e.ui.appBannerDismissed}const ve=(0,R.forwardRef)((function(e,t){return(0,R.useEffect)((()=>{window.performance?.mark?.("iframe_rendered")}),[e.src]),(0,X.tZ)("iframe",{...e,ref:t})}));var Pe=s("../node_modules/@wordpress/blocks/build-module/index.js"),ke=s("../node_modules/lodash-es/reduce.js"),Se=s("../node_modules/lodash-es/includes.js");const Te=[],xe=["google_photos","openverse","pexels"],Me=e=>!e||Array.isArray(e)&&!e.length||(0,Se.Z)(e,"image")?Te:xe,Ee={image:"images",audio:"audio",video:"videos"},Ce=e=>Array.isArray(e)&&e.length?e.map((e=>Ee[e])):void 0,qe=()=>(0,X.tZ)("div",{className:"editor__placeholder",children:(0,X.BX)("div",{className:"edit-post-layout",children:[(0,X.BX)("div",{className:"edit-post-header",children:[(0,X.tZ)("div",{className:"edit-post-header-toolbar",children:(0,X.tZ)("div",{className:"placeholder placeholder-site",children:"Placeholder"})}),(0,X.BX)("div",{className:"edit-post-header__settings",children:[(0,X.tZ)("div",{className:"placeholder placeholder-button",children:"Placeholder"}),(0,X.tZ)("div",{className:"placeholder placeholder-button",children:"Placeholder"}),(0,X.tZ)("div",{className:"placeholder placeholder-button",children:"Placeholder"})]})]}),(0,X.tZ)("div",{className:"edit-post-layout__content",children:(0,X.tZ)("div",{className:"edit-post-visual-editor editor-styles-wrapper",children:(0,X.tZ)("div",{className:"editor-writing-flow",children:(0,X.tZ)("div",{className:"editor-post-title",children:(0,X.tZ)("div",{className:"placeholder placeholder-title wp-block editor-post-title__block",children:"Placeholder"})})})})})]})});var Re,Be;!function(e){e.Loaded="loaded",e.ClassicBlockOpenMediaModel="classicBlockOpenMediaModal"}(Re||(Re={})),function(e){e.GoToAllPosts="goToAllPosts",e.CloseEditor="closeEditor",e.OpenMediaModal="openMediaModal",e.OpenCheckoutModal="openCheckoutModal",e.GetCheckoutModalStatus="getCheckoutModalStatus",e.OpenRevisions="openRevisions",e.PostStatusChange="postStatusChange",e.OpenLinkInParentFrame="openLinkInParentFrame",e.ViewPost="viewPost",e.SetDraftId="draftIdSet",e.TrashPost="trashPost",e.OpenCustomizer="openCustomizer",e.GetCloseButtonUrl="getCloseButtonUrl",e.GetGutenboardingStatus="getGutenboardingStatus",e.ToggleInlineHelpButton="toggleInlineHelpButton",e.GetNavSidebarLabels="getNavSidebarLabels",e.GetCalypsoUrlInfo="getCalypsoUrlInfo",e.TrackPerformance="trackPerformance",e.GetIsAppBannerVisible="getIsAppBannerVisible",e.NavigateToHome="navigateToHome"}(Be||(Be={}));var De=function(e){Promise.all([s.e(53647),s.e(67679),s.e(65783),s.e(14059),s.e(36987),s.e(42160),s.e(58112),s.e(28943),s.e(18891),s.e(31562),s.e(50842),s.e(41526),s.e(14953),s.e(36327),s.e(37803),s.e(73319),s.e(5443),s.e(11466),s.e(98718),s.e(10160),s.e(82448),s.e(22702)]).then(s.bind(s,"./post-editor/editor-media-modal/index.jsx")).then((function(t){e(t.default)}))},$e=function(e){Promise.all([s.e(53647),s.e(82430),s.e(69228),s.e(10773),s.e(12641),s.e(24619),s.e(12050),s.e(52203),s.e(68369),s.e(56532),s.e(61604),s.e(16446),s.e(97810),s.e(83228),s.e(12952),s.e(5298),s.e(83962),s.e(45806),s.e(80110),s.e(5958),s.e(31514),s.e(94615)]).then(s.bind(s,"./blocks/editor-checkout-modal/index.tsx")).then((function(t){e(t.default)}))},Ae=function(e){Promise.all([s.e(65783),s.e(78845)]).then(s.bind(s,"./post-editor/editor-revisions/dialog.jsx")).then((function(t){e(t.default)}))};class Le extends R.Component{constructor(...e){super(...e),(0,T.Z)(this,"state",{isMediaModalVisible:!1,isCheckoutModalVisible:!1,isIframeLoaded:!1,currentIFrameUrl:"",checkoutModalOptions:void 0}),(0,T.Z)(this,"iframeRef",R.createRef()),(0,T.Z)(this,"iframePort",null),(0,T.Z)(this,"mediaSelectPort",null),(0,T.Z)(this,"mediaCancelPort",null),(0,T.Z)(this,"revisionsPort",null),(0,T.Z)(this,"checkoutPort",null),(0,T.Z)(this,"appBannerPort",null),(0,T.Z)(this,"editorRedirectTimer",void 0),(0,T.Z)(this,"setEditorRedirectTimer",(e=>{this.editorRedirectTimer&&clearTimeout(this.editorRedirectTimer),this.editorRedirectTimer=setTimeout(this.tryRedirect,e)})),(0,T.Z)(this,"disableRedirects",!1),(0,T.Z)(this,"tryRedirect",(()=>{this.disableRedirects||window.location.replace(this.props.iframeUrl)})),(0,T.Z)(this,"onMessage",(({data:e,origin:t})=>{if(!e||"gutenbergIframeMessage"!==e.type)return;if(!(this.props.siteAdminUrl&&0===this.props.siteAdminUrl.indexOf(t)))return;const{action:s}=e;if(Re.Loaded===s&&this.iframeRef.current&&this.iframeRef.current.contentWindow){this.disableRedirects=!0,this.editorRedirectTimer&&clearTimeout(this.editorRedirectTimer);const{port1:e,port2:t}=new window.MessageChannel;return this.iframePort=e,this.iframePort.addEventListener("message",this.onIframePortMessage,!1),this.iframePort.start(),this.iframeRef.current.contentWindow.postMessage({action:"initPort"},"*",[t]),this.props.setEditorIframeLoaded(!0,this.iframePort),window.performance?.mark?.("iframe_loaded"),void this.setState({isIframeLoaded:!0,currentIFrameUrl:this.props.iframeUrl})}if(Re.ClassicBlockOpenMediaModel===s){if(e.imageId){const{siteId:t}=this.props;this.props.selectMediaItems(t,[{ID:e.imageId}])}this.setState({classicBlockEditorId:e.editorId,isMediaModalVisible:!0,multiple:!0})}})),(0,T.Z)(this,"onIframePortMessage",(e=>{const{data:t,ports:s}=e,o=t.ports??s,{action:r,payload:a}=t;if(Be.OpenMediaModal===r&&o&&o[0]){const{siteId:e}=this.props,{allowedTypes:t,multiple:s,value:i}=a;if(this.mediaSelectPort=o[0],this.mediaCancelPort=o[1],i){const t=(Array.isArray(i)?i.map((e=>parseInt(e,10))):[parseInt(i,10)]).map((t=>{const s=this.props.getMediaItem(e,t);return s||this.props.fetchMediaItem(e,t),{ID:t,...s}}));this.props.selectMediaItems(e,t)}else this.props.selectMediaItems(e,[]);this.setState({isMediaModalVisible:!0,allowedTypes:t,multiple:s})}if(Be.OpenCheckoutModal===r&&(this.checkoutPort=o[0],this.setState({isCheckoutModalVisible:!0,checkoutModalOptions:a})),Be.GetCheckoutModalStatus===r){const e=n.ZP.isEnabled("post-editor/checkout-overlay");o[0].postMessage({isCheckoutOverlayEnabled:e})}if(Be.SetDraftId===r&&!this.props.postId){const{postId:e}=a,{siteId:t,currentRoute:s,postType:o}=this.props;s.endsWith(`/${e}`)||(i().replace(`${s}/${e}`,null,!1,!1),this.props.setRoute(`${s}/${e}`),this.props.startEditingPost(t,e),this.props.editPost(t,e,{type:o}))}if(Be.TrashPost===r){const{siteId:e,editedPostId:t,postTypeTrashUrl:s}=this.props;this.props.trashPost(e,t),(0,U.c)(s)}if(Be.CloseEditor===r||Be.GoToAllPosts===r){let e=!1,t=this.props.closeUrl;a?.unsavedChanges&&(e=a.unsavedChanges),a?.destinationUrl&&(t=a.destinationUrl),this.props.setEditorIframeLoaded(!1),this.navigate(t,e)}if(Be.OpenRevisions===r&&(o&&o[0]&&(this.revisionsPort=o[0]),this.props.openPostRevisionsDialog()),Be.ViewPost===r){const{postUrl:e}=a;window.open(e,"_top")}if(Be.OpenLinkInParentFrame===r){const{postUrl:e}=a;window.open(e,"_top")}if(Be.OpenCustomizer===r){const{autofocus:e=null,unsavedChanges:t=!1}=a;this.openCustomizer(e,t)}if(Be.GetCloseButtonUrl===r){const{closeUrl:e,closeLabel:t}=this.props;o[0].postMessage({closeUrl:`${window.location.origin}${e}`,label:t})}if(Be.GetGutenboardingStatus===r){const e="gutenboarding"===this.props.siteCreationFlow,t=window.location.href;o[0].postMessage({isGutenboarding:e,currentCalypsoUrl:t})}if(Be.ToggleInlineHelpButton===r){const e=window?.top?.document.querySelector("#wpcom > .layout > .inline-help");e&&(e.hidden=a.hidden)}if(Be.GetNavSidebarLabels===r){const{translate:e}=this.props;o[0].postMessage({allPostsLabels:{page:e("View all pages"),post:e("View all posts")},createPostLabels:{page:e("Add new page"),post:e("Add new post")},listHeadings:{page:e("Recent Pages"),post:e("Recent Posts")}})}if(Be.GetCalypsoUrlInfo===r&&o[0].postMessage({origin:window.location.origin,siteSlug:this.props.siteSlug}),Be.PostStatusChange===r){const{status:e}=a;this.handlePostStatusChange(e)}if(Be.TrackPerformance===r&&"editor.ready"===a.mark&&this.props.stopPerformanceTracking({isNew:a.isNew,blockCount:a.blockCount}),Be.GetIsAppBannerVisible===r){const e=this.props.shouldDisplayAppBanner;o[0].postMessage({isAppBannerVisible:e,hasAppBannerBeenDismissed:!1}),e&&(this.appBannerPort=o[0])}Be.NavigateToHome===r&&i()(`/home/${this.props.siteSlug}`)})),(0,T.Z)(this,"handlePostStatusChange",(e=>{const{creatingNewHomepage:t,editedPostId:s,isSiteWPForTeams:o,siteUrl:i}=this.props;t&&"publish"===e&&this.setFrontPage(),o&&s&&i&&"publish"===e&&top&&(top.location.href=(0,d.Z)({p:s},i))})),(0,T.Z)(this,"setFrontPage",(()=>{const{editedPostId:e,siteId:t}=this.props;this.props.updateSiteFrontPage(t,{show_on_front:"page",page_on_front:e})})),(0,T.Z)(this,"loadRevision",(({post_title:e,post_excerpt:t,post_content:s})=>{this.iframePort&&(this.revisionsPort?(this.revisionsPort.postMessage({title:e,excerpt:t,content:s}),this.revisionsPort.close(),this.revisionsPort=null):this.iframePort.postMessage({action:"loadRevision",payload:{title:e,excerpt:t,content:s}}))})),(0,T.Z)(this,"closeMediaModal",(e=>{if(!this.state.classicBlockEditorId&&e&&this.mediaSelectPort){const{multiple:t}=this.state,s=(0,E.Z)(e.items,(e=>(e=>{const t={id:(0,le.Z)(e,"ID"),url:(0,le.Z)(e,"URL"),alt:(0,le.Z)(e,"alt"),caption:e.caption?(0,Pe.eP)(e.caption,{source:"children"}):"",description:(0,le.Z)(e,"description"),filename:(0,le.Z)(e,"file"),height:(0,le.Z)(e,"height"),icon:(0,le.Z)(e,"icon"),mime:(0,le.Z)(e,"mime_type"),sizes:{full:{url:(0,le.Z)(e,"URL")},...(0,ke.Z)(e.thumbnails,((e,t,s)=>(e[s]={url:t},e)),{})},title:(0,le.Z)(e,"title"),type:(0,le.Z)(e,"mime_type","").split("/")[0],width:(0,le.Z)(e,"width")};return e.videopress_guid&&(t.allow_download=e.allow_download,t.rating=e.rating,t.videopress_guid=e.videopress_guid),t})(e))),o=t?s:s[0];this.mediaSelectPort.postMessage(o),this.mediaSelectPort.close(),this.mediaSelectPort=null}this.state.classicBlockEditorId||e||!this.mediaCancelPort||(this.mediaCancelPort.postMessage(!0),this.mediaCancelPort.close(),this.mediaCancelPort=null),this.setState({classicBlockEditorId:null,isMediaModalVisible:!1})})),(0,T.Z)(this,"insertClassicBlockMedia",(e=>{this.state.classicBlockEditorId&&this.iframePort&&this.iframePort.postMessage({action:"insertClassicBlockMedia",payload:{editorId:this.state.classicBlockEditorId,media:e}})})),(0,T.Z)(this,"closeCheckoutModal",(()=>{this.setState({isCheckoutModalVisible:!1})})),(0,T.Z)(this,"openCustomizer",((e,t)=>{let{customizerUrl:s}=this.props;if(e){const[t,o]=Object.entries(e)[0];s=(0,d.Z)({[`autofocus[${t}]`]:o},s)}this.navigate(s,t)})),(0,T.Z)(this,"navigate",((e,t)=>{const{markChanged:s,markSaved:o}=this.props;t?s():o(),(0,U.c)(e)})),(0,T.Z)(this,"getStatsPath",(()=>{const{postId:e}=this.props;return e?"/:post_type/:site/:post_id":"/:post_type/:site"})),(0,T.Z)(this,"getStatsProps",(()=>{const{postId:e,postType:t}=this.props;return this.getStatsPropertiesForProps(e,t)})),(0,T.Z)(this,"getStatsPropertiesForProps",(0,O.Z)(((e,t)=>e?{post_type:t,post_id:e}:{post_type:t}))),(0,T.Z)(this,"getStatsTitle",(()=>{const{postId:e,postType:t}=this.props;let s;switch(t){case"post":s="Post";break;case"page":s="Page";break;default:s="Custom Post Type"}return e?`Block Editor > ${s} > Edit`:`Block Editor > ${s} > New`})),(0,T.Z)(this,"handleCheckoutSuccess",(()=>{this.checkoutPort&&(this.checkoutPort.postMessage("checkout complete"),this.checkoutPort.close(),this.checkoutPort=null,this.setState({isCheckoutModalVisible:!1}))})),(0,T.Z)(this,"handleAppBannerDismiss",(()=>{this.appBannerPort&&(this.appBannerPort.postMessage({isAppBannerVisible:!1,hasAppBannerBeenDismissed:!0}),this.appBannerPort.close(),this.appBannerPort=null)}))}componentDidMount(){window.addEventListener("message",this.onMessage,!1),this.props.shouldLoadIframe&&!this.editorRedirectTimer&&this.setEditorRedirectTimer(25e3),window.sessionStorage.getItem("a8c-clearLastNonEditorRoute")&&(window.sessionStorage.removeItem("a8c-clearLastNonEditorRoute"),this.props.clearLastNonEditorRoute())}componentDidUpdate({shouldLoadIframe:e}){this.editorRedirectTimer||e||!this.props.shouldLoadIframe||this.setEditorRedirectTimer(25e3),this.props.appBannerDismissed&&this.handleAppBannerDismiss()}componentWillUnmount(){this.editorRedirectTimer&&clearTimeout(this.editorRedirectTimer),window.removeEventListener("message",this.onMessage,!1)}render(){const{iframeUrl:e,shouldLoadIframe:t,isNew7DUser:s,currentUserCountryCode:o}=this.props,{classicBlockEditorId:i,isMediaModalVisible:r,isCheckoutModalVisible:a,allowedTypes:d,multiple:l,isIframeLoaded:c,currentIFrameUrl:p,checkoutModalOptions:u}=this.state,h=!!i,m=n.ZP.isEnabled("post-editor/checkout-overlay"),{redirectTo:g,isFocusedLaunch:f,...y}=u||{};return s||"IN"!==o||((0,A.o)(),window&&window.hj&&window.hj("trigger","in_survey_1")),(0,X.BX)(R.Fragment,{children:[(0,X.tZ)(L.Z,{path:this.getStatsPath(),title:this.getStatsTitle(),properties:this.getStatsProps()}),(0,X.tZ)(K,{}),(0,X.BX)("div",{className:"main main-column calypsoify is-iframe",role:"main",children:[!c&&(0,X.tZ)(qe,{}),(t||c)&&(0,X.tZ)(ve,{className:c?"is-loaded":"",ref:this.iframeRef,src:c?p:e,onLoad:()=>this.setEditorRedirectTimer(2e3),style:c?void 0:{opacity:0},allow:"clipboard-read; clipboard-write"})]}),(0,X.tZ)(D.Z,{require:De,placeholder:null,disabledDataSources:Me(d),enabledFilters:Ce(d),galleryViewEnabled:h,isGutenberg:!h,onClose:this.closeMediaModal,onInsertMedia:this.insertClassicBlockMedia,single:!l,source:"",visible:r}),m&&(0,X.tZ)(D.Z,{checkoutOnSuccessCallback:this.handleCheckoutSuccess,require:$e,onClose:this.closeCheckoutModal,placeholder:null,isOpen:a,cartData:y,redirectTo:g,isFocusedLaunch:f}),(0,X.tZ)(D.Z,{require:Ae,placeholder:null,loadRevision:this.loadRevision})]})}}const Oe={setRoute:re.p,openPostRevisionsDialog:ie.VH,setEditorIframeLoaded:m.jP,startEditingPost:m.jZ,editPost:se.d,trashPost:oe.W,updateSiteFrontPage:w.p$,selectMediaItems:Q.Un,fetchMediaItem:(e,t)=>s=>{ee("Fetching media for %d using ID %d",e,t),s((0,Q.lh)(e,t))},getMediaItem:te.Z,clearLastNonEditorRoute:re.Y},Ue=(0,q.Z)(N.ZW,$.Z,(0,B.$j)(((e,{postId:t,postType:s,duplicatePostId:o,parentPostId:i,creatingNewHomepage:r,editorType:a="post",stripeConnectSuccess:l,anchorFmData:c,showDraftPostModal:p,pressThisData:u,blockEditorSettings:m})=>{const g=(0,S.Z)(e),f=(0,be.Z)(e),j=(0,ae.Z)(e),Z=he(e,s),_=(0,I.Z)(e,g)?"jetpack_frame_nonce":"frame_nonce";let w=(0,C.Z)({post:t,action:t&&"edit",post_type:"post"!==s&&s,calypsoify:1,parent_post:null!=i&&i,"block-editor":1,"frame-nonce":(0,b.Z)(e,g,_)||"","jetpack-copy":o,origin:window.location.origin,"environment-id":(0,n.ZP)("env_id"),"new-homepage":r,...!!l&&{stripe_connect_success:l},...c,openSidebar:(0,x.I)(window.location.href,"openSidebar"),showDraftPostModal:p,...u,answer_prompt:(0,x.I)(window.location.href,"answer_prompt"),assembler:(0,x.I)(window.location.href,"assembler"),canvas:(0,x.I)(window.location.href,"canvas")});if(z.Z.addSupportParams&&(w=z.Z.addSupportParams(w)),"classic"===(0,y.E)(e,g??0)&&(w["in-editor-deprecation-group"]=1),"site"===a&&m?.home_template?.postType){const e=(0,x.I)(window.location.href,"templateType"),t=(0,x.I)(window.location.href,"templateId");e&&t?(w.postType=e,w.postId=t):m?.home_template?.postType&&(w.postType=m.home_template.postType,w.postId=m.home_template.postId)}const v=/[&?]notice=([\w_-]+)/.exec(document.location.search),P=v&&v[1];P&&(w.notice=P);const T="site"===a?(0,k.Z)(e,g,"site-editor.php"):(0,k.Z)(e,g,t?"post.php":"post-new.php"),M=(0,d.Z)(w,T??""),E=!(0,Ze.Z)(e,g??0),{url:q,label:R}=function(e,t,s){const o=de(e),i=e=>o.match(e),r=e?.ui?.selectedSiteId,a=e?.sites?.items[r];if("full"===a?.options?.launchpad_screen){const t=(0,ce.Z)(e,r),s=a?.options?.site_intent;return{url:`/setup/${s}/launchpad?siteSlug=${t}`,label:(0,ne.Iu)("Next steps")}}if(i(/^\/themes\/?/))return{url:`/themes/${(0,ce.Z)(e,t)}`,label:(0,ne.Iu)("Themes")};if(!o||!s||i(/^\/home\/?/))return{url:`/home/${(0,ce.Z)(e,t)}`,label:(0,ne.Iu)("Dashboard")};let n=(0,ne.Iu)("Back");return"post"===s?n=(0,ne.Iu)("View Posts"):"page"===s&&(n=(0,ne.Iu)("View Pages")),{url:ue(e,s),label:n}}(e,g,s),B=(0,je.Z)(e)&&!p;return{closeUrl:q,closeLabel:R,currentRoute:j,currentUserCountryCode:(0,h.Yv)(e),editedPostId:(0,W.BN)(e),frameNonce:(0,b.Z)(e,g,"frame_nonce")||"",iframeUrl:M,isSiteWPForTeams:(0,ge.Z)(e,g??0),postTypeTrashUrl:Z,shouldLoadIframe:E,siteAdminUrl:T,siteId:g,siteSlug:f,siteUrl:(0,me.Z)(e,g??0),customizerUrl:(0,_e.Z)(e,g),unmappedSiteUrl:(0,b.Z)(e,g,"unmapped_url"),siteCreationFlow:(0,b.Z)(e,g,"site_creation_flow"),isSiteUnlaunched:(0,fe.Z)(e,g),site:(0,we.Z)(e,g??0),parentPostId:i,shouldDisplayAppBanner:B,appBannerDismissed:Ie(e),isNew7DUser:(0,ye.Z)(e,null,0,7)}}),Oe),M.Z,V.TW)(Le),Ne=()=>{};function Ve(e){return e.path.startsWith("/post/")?"post":e.path.startsWith("/page/")?"page":e.params.customPostType}function ze(e){if(!e.params.post||"new"===e.params.post)return null;if("home"===e.params.post){const t=e.store.getState(),s=(0,S.Z)(t);return parseInt((0,b.Z)(t,s,"page_on_front"),10)}return parseInt(e.params.post,10)}function Fe(e){const t=(0,S.Z)(e);return!(!t||(0,u.a)(e))&&null!==(0,u.Z)(e,t)}const Ge=(e,t)=>{const s=e.store.getState(),o=(0,S.Z)(s),i=(0,I.Z)(s,o),a=(0,n._k)("desktop"),l=`gutenframe_${o}_is_authenticated`;let c=globalThis.sessionStorage.getItem(l)||!i||i&&P(s,o)||a||e.query.authWpAdmin;if(a&&i&&!P(s,o)&&(c=!1),c)return e.store.dispatch((0,w.LV)(o)),globalThis.sessionStorage.setItem(l,"true"),t();e.primary=(0,X.tZ)(qe,{}),(0,r.wx)(e,Ne),(0,r.sY)(e);const p=window.location.origin,u=(0,d.Z)({...e.query,authWpAdmin:!0},`${p}${e.path}`),h=(0,k.Z)(s,o),m=(0,d.Z)({redirect_to:u},`${h}../wp-login.php`);window.location.replace(m)},We=async(e,t)=>{const{store:{getState:s}}=e,o=s(),i=[];(0,y.E)(o,(0,S.Z)(o))||i.push(function(e){return new Promise((t=>{const s=e.store.subscribe((()=>{const o=e.store.getState(),i=(0,S.Z)(o);i&&(0,y.E)(o,i)&&(s(),t())}));e.store.dispatch((0,g.o)((0,S.Z)(e.store.getState())))}))}(e)),Fe(o)||i.push(function(e){return new Promise((t=>{const s=e.store.subscribe((()=>{Fe(e.store.getState())&&(s(),t())}));e.store.dispatch((0,p.u)((0,S.Z)(e.store.getState())))}))}(e)),await Promise.all(i);const r=s(),a=(0,S.Z)(r),n=e.query.is_post_share;if(n&&"true"===n&&!(0,Z.Z)(r,a))return t();const l=Ve(e);if(!(0,_.Z)(r,a,l)){const t=ze(e),s=l?(0,f.Z)(r,a,t,l):(0,j.Z)(r,a);return window.location.replace((0,d.Z)(e.query,s))}return t()};function Ye(e){const t=window.sessionStorage.getItem(e);return window.sessionStorage.removeItem(e),t}const He=(e,t)=>{const s=ze(e),o=Ve(e),i=parseInt(e.query["jetpack-copy"]),r=Number.isInteger(i)?i:null,a=e.store.getState(),n=(0,S.Z)(a),d=function(e){const{text:t,url:s,title:o,embed:i}=e;return s?{text:t,url:s,title:o,embed:i}:null}(e.query),l=function(e){const{anchor_podcast:t,anchor_episode:s,spotify_url:o}=e;return{anchor_podcast:t,anchor_episode:s,spotify_url:o}}(e.query),p=parseInt(e.query.parent_post,10)||null;return e.store.dispatch({type:c.gQI,siteId:n,postId:s}),e.store.dispatch({type:c.oD3,post:{type:o},siteId:n,postId:s}),e.primary=(0,X.tZ)(Ue,{postId:s,postType:o,duplicatePostId:r,pressThisData:d,anchorFmData:l,parentPostId:p,creatingNewHomepage:"page"===o&&e.query.hasOwnProperty("new-homepage"),stripeConnectSuccess:e.query.stripe_connect_success??null,showDraftPostModal:Ye("wpcom_signup_complete_show_draft_post_modal")},s),t()},Xe=(e,t)=>{const s=ze(e),o=(0,S.Z)(e.store.getState());o&&e.store.dispatch((0,m.nF)(o,s)),t()},Ke=async e=>{const t=e.store.getState(),s=(0,S.Z)(t),o=(0,j.Z)(t,s);return window.location.replace((0,d.Z)(e.query,o))};function Qe(e,t){if((0,h.Pc)(e.store.getState()))return t();const s=e.params.site||(0,l.lQ)(e.path),o=e.path.split("/");if(e.path&&"edit"===o[1]&&!["jetpack-portfolio","jetpack-testimonial"].includes(o[2]))return t();window.location=`https://public-api.wordpress.com/wpcom/v2/sites/${s}/editor/redirect?path=${e.path}`}function Je(){i()("/site-editor/:site?",r.S9,a.tq,Ke),i()("/post",r.S9,a.tq,a.tc,r.wx,r.sY),i()("/post/new","/post"),i()("/post/:site/:post?",Qe,a.tq,We,Ge,He,r.wx,r.sY),i().exit("/post/:site?/:post?",Xe),i()("/post/:site?",r.S9,a.tq,We,r.wx,r.sY),i()("/page",r.S9,a.tq,a.tc,r.wx,r.sY),i()("/page/new","/page"),i()("/page/:site/:post?",Qe,a.tq,We,Ge,He,r.wx,r.sY),i().exit("/page/:site?/:post?",Xe),i()("/page/:site?",r.S9,a.tq,We,r.wx,r.sY),i()("/edit/:customPostType",r.S9,a.tq,a.tc,r.wx,r.sY),i()("/edit/:customPostType/:site/:post?",Qe,a.tq,We,Ge,He,r.wx,r.sY),i()("/edit/:customPostType/:site?",r.S9,a.tq,We,r.wx,r.sY),i()("/block-editor/","/post"),i()("/block-editor/post/","/post"),i()("/block-editor/post/:site/:post?",(({params:e={}})=>{const{site:t,post:s}=e;if(s)return i().redirect(`/post/${t}/${s}`);i().redirect(`/post/${t}/`)})),i()("/block-editor/page/","/page"),i()("/block-editor/page/:site/:page?",(({params:e={}})=>{const{site:t,page:s}=e;if(s)return i().redirect(`/page/${t}/${s}`);i().redirect(`/page/${t}/`)})),i()("/block-editor/edit/:customPostType/:site/:post?",(({params:e={}})=>{const{customPostType:t,site:s,post:o}=e;if(o)return i().redirect(`/edit/${t}/${s}/${o}`);i().redirect(`/edit/${t}/${s}`)}))}},"./lib/query-manager/schema.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d,v:()=>n});var o=s("../node_modules/deep-freeze/index.js"),i=s.n(o),r=s("../node_modules/lodash-es/cloneDeepWith.js");const a=i()({additionalProperties:!1,required:["data","options"],type:"object",properties:{data:{additionalProperties:!1,type:"object",properties:{items:{type:"object"},queries:{additionalProperties:!1,type:"object",patternProperties:{"^\\[.*\\]$":{required:["itemKeys"],type:"object",properties:{itemKeys:{type:"array",items:{type:["integer","null","string"]}},found:{type:"integer"}}}}}}},options:{additionalProperties:!0,required:["itemKey"],type:"object",properties:{itemKey:{type:"string"}}}}});function n(e){return(0,r.Z)(a,(t=>{if(t===a.properties.data.properties.items)return e}))}const d=a},"./my-sites/customize/panels.ts":(e,t,s)=>{"use strict";s.d(t,{t:()=>i});const o={widgets:["panel","widgets"],fonts:["section","jetpack_fonts"],identity:["section","title_tagline"],"custom-css":["section","jetpack_custom_css"],amp:["section","amp_design"],menus:["panel","nav_menus"],homepage:["section","static_front_page"],jetpack_search:["section","jetpack_search"]};function i(e){if(o.hasOwnProperty(e)){const[t,s]=o[e];return{[`autofocus[${t}]`]:s}}return null}},"./state/editor/actions.js":(e,t,s)=>{"use strict";s.d(t,{DG:()=>p,jP:()=>u,jZ:()=>l,nF:()=>c});var o=s("./state/action-types.ts"),i=s("./state/analytics/actions/with-analytics.js"),r=s("./state/analytics/actions/bump-stat.js"),a=s("./state/ui/media-modal/actions.js"),n=s("./state/ui/media-modal/constants.js");s("./state/editor/init.js"),s("./state/ui/init.js");const d={[n.b.LIST]:"view_list",[n.b.DETAIL]:"view_detail",[n.b.GALLERY]:"view_gallery",[n.b.IMAGE_EDITOR]:"view_edit",[n.b.VIDEO_EDITOR]:"view_edit"};function l(e,t){return{type:o.gQI,siteId:e,postId:t}}function c(e,t){return{type:o.cnn,siteId:e,postId:t}}function p(e){const t=(0,a.v)(e),s=d[e];return s?(0,i.w)((0,r.P)("editor_media_actions",s),t):t}const u=(e=!0,t=null)=>({type:o.rQz,isIframeLoaded:e,iframePort:t})},"./state/legal/init.js":(e,t,s)=>{"use strict";var o=s("./state/redux-store.ts"),i=s("../packages/state-utils/src/index.ts"),r=s("./state/action-types.ts");const a=(0,i.xi)("legal",((e={},{type:t,legalData:s})=>t===r.Lpm?s:e));(0,o.x)(["legal"],a)},"./state/media/actions.js":(e,t,s)=>{"use strict";s.d(t,{s0:()=>I,dp:()=>v,e8:()=>P,Uy:()=>M,qB:()=>_,h6:()=>b,d5:()=>w,Ap:()=>j,u0:()=>g,t9:()=>h,J_:()=>m,lh:()=>y,Un:()=>S,r6:()=>k,Kc:()=>T,_L:()=>x,af:()=>Z,HU:()=>f});var o=s("./state/action-types.ts"),i=s("../node_modules/debug/src/browser.js"),r=s.n(i),a=s("../node_modules/lodash-es/isEqual.js"),n=s("../node_modules/lodash-es/omit.js"),d=s("./state/data-layer/handler-registry.js"),l=s("./state/data-layer/wpcom-http/actions.js"),c=s("./state/data-layer/wpcom-http/utils.js"),p=s("./state/selectors/get-next-page-query.js");const u=r()("calypso:middleware-media");(0,d.Z9)("state/data-layer/wpcom/sites/media/index.js",{[o.sZU]:[(0,c.BN)({fetch:function(e){u("Request media for site %d using query %o",e.siteId,e.query);const{siteId:t,query:s}=e,o=s&&s.source?`/meta/external-media/${s.source}`:`/sites/${t}/media`;return[(0,l.d)({method:"GET",path:o,apiVersion:"1.1",query:s},e)]},onSuccess:({siteId:e,query:t},s)=>(o,i)=>{(0,a.Z)((0,n.Z)(t,"page_handle"),(0,n.Z)((0,p.Z)(i(),e),"page_handle"))?(o(h(e,s.media,s.found,t)),o(f(e,t)),o(T(e,s.meta))):o(f(e,t))},onError:({siteId:e,query:t})=>g(e,t)})],[o.uz_]:[(0,c.BN)({fetch:function(e){const{mediaId:t,query:s,siteId:o}=e;return u("Request media item %d for site %d",t,o),[(0,l.d)({apiVersion:"1.2",method:"GET",path:`/sites/${o}/media/${t}`,query:s},e)]},onSuccess:({mediaId:e,siteId:t},s)=>[h(t,s),Z(t,e)],onError:({mediaId:e,siteId:t})=>j(t,e)})]});s("./state/media/init.js");function h(e,t,s,i){return{type:o.iG7,siteId:e,media:Array.isArray(t)?t:[t],found:s,query:i}}function m(e,t){return{type:o.sZU,siteId:e,query:t}}function g(e,t,s=null){return{type:o.LEq,siteId:e,query:t,error:s}}function f(e,t){return{type:o.P4e,siteId:e,query:t}}function y(e,t){return{type:o.uz_,siteId:e,mediaId:t}}function j(e,t,s=null){return{type:o.F1b,siteId:e,mediaId:t,error:s}}function Z(e,t){return{type:o.l44,siteId:e,mediaId:t}}function _(e,t){return{type:o.TuQ,site:e,transientMedia:t}}const w=(e,t,s,i)=>({type:o.QdR,siteId:e,mediaItem:t,data:s,originalMediaItem:i});function b(e,t){return{type:o.aqr,mediaIds:Array.isArray(t)?t:[t],siteId:e}}function I(e){return{type:o.EzY,siteId:e}}function v(e,t){return{type:o.c0z,siteId:e,errorType:t}}function P(e,t){return{type:o.LEd,siteId:e,mediaId:t}}function k(e,t,s){return{type:o.zOw,siteId:e,mediaId:t,errors:s}}function S(e,t){return{type:o.OtT,media:t,siteId:e}}function T(e,t){return{type:o.Jfv,siteId:e,mediaRequestMeta:t}}function x(e,t){return{type:o.AsP,siteId:e,query:t}}function M(e){return{type:o._Ck,siteId:e}}},"./state/media/thunks/get-media-item.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var o=s("./state/selectors/get-media-item.js");function i(e,t){return(s,i)=>(0,o.Z)(i(),e,t)}},"./state/posts/actions/edit-post.js":(e,t,s)=>{"use strict";s.d(t,{d:()=>i});var o=s("./state/action-types.ts");s("./state/posts/init.js");function i(e,t=null,s){return{type:o.oD3,post:s,siteId:e,postId:t}}},"./state/posts/actions/receive-post.js":(e,t,s)=>{"use strict";s.d(t,{h:()=>i});var o=s("./state/posts/actions/receive-posts.js");s("./state/posts/init.js");function i(e,t){return(0,o.x)([e],t)}},"./state/posts/actions/receive-posts.js":(e,t,s)=>{"use strict";s.d(t,{x:()=>i});var o=s("./state/action-types.ts");s("./state/posts/init.js");function i(e,t){const s={type:o.hYA,posts:e};return t&&(s.saveMarker=t),s}},"./state/posts/revisions/actions.js":(e,t,s)=>{"use strict";s.d(t,{uz:()=>c,VH:()=>p,o8:()=>d,Ps:()=>n,CK:()=>l,X2:()=>u,Wk:()=>h});var o=s("./state/action-types.ts"),i=s("./state/data-layer/handler-registry.js"),r=s("./state/data-layer/wpcom-http/actions.js");const a=(0,s("./state/data-layer/wpcom-http/utils.js").BN)({fetch:e=>{const{siteId:t,postId:s,postType:o,comparisons:i}=e;return(0,r.d)({apiVersion:"1.2",path:`/sites/${t}/${o}/${s}/diffs`,method:"GET",query:{comparisons:i}},e)},onSuccess:({siteId:e,postId:t},s)=>d({siteId:e,postId:t,...s}),onError:()=>{}});(0,i.Z9)("state/data-layer/wpcom/posts/revisions/index.js",{[o.XB4]:[a]});s("./state/posts/init.js");const n=(e,t,s="posts",i=[])=>({type:o.XB4,comparisons:i,postId:t,postType:s,siteId:e}),d=({diffs:e,postId:t,revisions:s,siteId:i})=>({type:o.vIA,diffs:e,postId:t,revisions:s,siteId:i}),l=e=>({type:o.N__,revisionId:e}),c=()=>({type:o.NYz}),p=()=>({type:o.gpX}),u=()=>({type:o.Se1}),h=()=>({type:o.bE0})},"./state/posts/selectors/get-edited-post-value.js":(e,t,s)=>{"use strict";s.d(t,{r:()=>r});var o=s("../node_modules/lodash-es/get.js"),i=s("./state/posts/selectors/get-edited-post.js");s("./state/posts/init.js");function r(e,t,s,r){return(0,o.Z)((0,i.P)(e,t,s),r)}},"./state/posts/selectors/get-site-post.js":(e,t,s)=>{"use strict";s.d(t,{i:()=>i});var o=s("../packages/state-utils/src/index.ts");s("./state/posts/init.js");const i=(0,o.P1)(((e,t,s)=>{if(!t)return null;const o=e.posts.queries[t];return o?o.getItem(s):null}),(e=>e.posts.queries))},"./state/selectors/get-next-page-handle.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var o=s("../node_modules/lodash-es/get.js");s("./state/media/init.js");function i(e,t){return(0,o.Z)(e.media.fetching,[t,"nextPageHandle"])}},"./state/selectors/get-next-page-query.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});s("./state/media/init.js");var o=s("./state/selectors/get-next-page-handle.js");const i=Object.freeze({number:20});function r(e,t){if(!(t in e.media.fetching))return i;const s=function(e,t){return e.media.fetching[t]?.query??null}(e,t),r=(0,o.Z)(e,t);return["string","number"].includes(typeof r)?{...i,...s,page_handle:r}:{...i,...s}}},"./state/selectors/get-selected-editor.js":(e,t,s)=>{"use strict";s.d(t,{E:()=>n});var o=s("../node_modules/lodash-es/get.js"),i=s("../packages/calypso-config/src/index.ts"),r=s("./state/selectors/is-vip-site.js");s("./state/selected-editor/init.js");const a=(e,t)=>{const s=(0,o.Z)(e,["selectedEditor",t],null);return!(!(0,i._k)("desktop")||!["gutenberg-redirect","gutenberg-redirect-and-style"].includes(s))||!!(0,r.Z)(e,t)},n=(e,t)=>{const s=(0,o.Z)(e,["selectedEditor",t],null);return["gutenberg-iframe","gutenberg-redirect","gutenberg-redirect-and-style","classic"].includes(s)?a(e,t)?"classic":s:null}},"./state/selectors/get-site-editor-url.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var o=s("./lib/url/add-query-args.ts"),i=s("./state/sites/selectors/get-site-admin-url.ts");const r=(e,t)=>{const s=(0,i.Z)(e,t),r={};return"undefined"!=typeof window&&"https://wordpress.com"!==window.location.origin&&(r.calypso_origin=window.location.origin),(0,o.Z)(r,`${s}site-editor.php`)}},"./state/selectors/is-user-registration-days-within-range.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var o=s("./state/current-user/selectors.js");const i=864e5;function r(e,t,s,r){const a=(0,o.DI)(e);if(!a)return null;const n=((t=t||Date.now())-new Date(a))/i;return n>=s&&n<=r}},"./state/selectors/should-display-app-banner.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>f});var o=s("../packages/state-utils/src/index.ts"),i=s("../packages/viewport/src/index.ts"),r=s("../node_modules/lodash-es/includes.js"),a=s("./blocks/app-banner/utils.js"),n=s("./lib/e2e/index.ts"),d=s("./lib/mobile-app/index.js"),l=s("./state/preferences/selectors.js"),c=s("./state/selectors/is-notifications-open.js"),p=s("./state/selectors/should-display-tos-update-banner.js"),u=s("./state/signup/flow/selectors.js"),h=(s("./state/ui/init.js"),s("./state/ui/layout-focus/selectors.js"));function m(e){return e.ui.appBannerVisibility&&"sidebar"!==(0,h.d)(e)}var g=s("./state/ui/selectors/get-section-name.js");const f=(0,o.P1)((e=>{if((0,n.b)())return!1;if((0,p.V)(e))return!1;if(!m(e))return!1;if(!(0,l.V2)(e))return!1;const t=(0,g.Z)(e),s=(0,c.Z)(e),o=(0,a.lt)(t,s);if("setup-site"===(0,u.sP)(e)&&a.yv===o)return!1;if(!(0,r.Z)(a.AK,o))return!1;const h=(0,l.Oz)(e,a.jc),f=(0,a.zE)(h,o);return(0,i.tq)()&&!(0,d.H)()&&!f}),[p.V,m,l.V2,g.Z,c.Z,e=>(0,l.Oz)(e,a.jc)])},"./state/selectors/should-display-tos-update-banner.js":(e,t,s)=>{"use strict";s.d(t,{V:()=>o});s("./state/legal/init.js");const o=e=>!0===e?.legal?.tos?.displayPrompt},"./state/signup/flow/selectors.js":(e,t,s)=>{"use strict";s.d(t,{BS:()=>a,nf:()=>r,sP:()=>i});var o=s("../node_modules/lodash-es/get.js");s("./state/signup/init.js");function i(e){return(0,o.Z)(e,"signup.flow.currentFlowName","")}function r(e){return(0,o.Z)(e,"signup.flow.previousFlowName","")}function a(e){return(0,o.Z)(e,"signup.flow.excludedSteps",[])}},"./state/sites/selectors/get-customizer-url.ts":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var o=s("../packages/wpcom-checkout/src/is-value-truthy.ts"),i=s("./lib/url/add-query-args.ts"),r=s("./my-sites/customize/panels.ts"),a=s("./state/sites/selectors/get-site-admin-url.ts"),n=s("./state/sites/selectors/get-site-slug.js"),d=s("./state/sites/selectors/is-jetpack-site.ts");function l(e,t,s,l,c){if(!(0,d.Z)(e,t)){const r=(0,n.Z)(e,t),a=[""].concat(["customize",s,r].filter(o.f)).join("/");return(0,i.Z)({return:l,guide:c},a)}const p=(0,a.Z)(e,t,"customize.php");return p?(l||"undefined"==typeof window||(l=window.location.href),(0,i.Z)({return:l,...s?(0,r.t)(s):{},guide:c},p)):null}},"./state/ui/media-modal/actions.js":(e,t,s)=>{"use strict";s.d(t,{M:()=>r,v:()=>i});var o=s("./state/action-types.ts");s("./state/ui/init.js");function i(e){return{type:o.WkZ,view:e}}function r(){return i(null)}},"./state/ui/media-modal/constants.js":(e,t,s)=>{"use strict";s.d(t,{b:()=>o});const o={LIST:"LIST",DETAIL:"DETAIL",GALLERY:"GALLERY",IMAGE_EDITOR:"IMAGE_EDITOR",VIDEO_EDITOR:"VIDEO_EDITOR"}},"../packages/wpcom-checkout/src/is-value-truthy.ts":(e,t,s)=>{"use strict";function o(e){return!!e}s.d(t,{f:()=>o})},"../node_modules/@tanstack/react-query/build/lib/useQuery.mjs":(e,t,s)=>{"use strict";s.d(t,{a:()=>a});var o=s("../node_modules/@tanstack/query-core/build/lib/utils.mjs"),i=s("../node_modules/@tanstack/query-core/build/lib/queryObserver.mjs"),r=s("../node_modules/@tanstack/react-query/build/lib/useBaseQuery.mjs");function a(e,t,s){const a=(0,o._v)(e,t,s);return(0,r.r)(a,i.z)}},"../node_modules/lodash-es/_baseUniq.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>p});var o=s("../node_modules/lodash-es/_SetCache.js"),i=s("../node_modules/lodash-es/_arrayIncludes.js"),r=s("../node_modules/lodash-es/_arrayIncludesWith.js"),a=s("../node_modules/lodash-es/_cacheHas.js"),n=s("../node_modules/lodash-es/_Set.js"),d=s("../node_modules/lodash-es/noop.js"),l=s("../node_modules/lodash-es/_setToArray.js");const c=n.Z&&1/(0,l.Z)(new n.Z([,-0]))[1]==1/0?function(e){return new n.Z(e)}:d.Z;const p=function(e,t,s){var n=-1,d=i.Z,p=e.length,u=!0,h=[],m=h;if(s)u=!1,d=r.Z;else if(p>=200){var g=t?null:c(e);if(g)return(0,l.Z)(g);u=!1,d=a.Z,m=new o.Z}else m=t?[]:h;e:for(;++n<p;){var f=e[n],y=t?t(f):f;if(f=s||0!==f?f:0,u&&y==y){for(var j=m.length;j--;)if(m[j]===y)continue e;t&&m.push(y),h.push(f)}else d(m,y,s)||(m!==h&&m.push(y),h.push(f))}return h}},"../node_modules/lodash-es/_stringSize.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>j});const o=(0,s("../node_modules/lodash-es/_baseProperty.js").Z)("length");var i=s("../node_modules/lodash-es/_hasUnicode.js"),r="\\ud800-\\udfff",a="["+r+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",d="\\ud83c[\\udffb-\\udfff]",l="[^"+r+"]",c="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+n+"|"+d+")"+"?",h="[\\ufe0e\\ufe0f]?",m=h+u+("(?:\\u200d(?:"+[l,c,p].join("|")+")"+h+u+")*"),g="(?:"+[l+n+"?",n,c,p,a].join("|")+")",f=RegExp(d+"(?="+d+")|"+g+m,"g");const y=function(e){for(var t=f.lastIndex=0;f.test(e);)++t;return t};const j=function(e){return(0,i.Z)(e)?y(e):o(e)}},"../node_modules/lodash-es/cloneDeepWith.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var o=s("../node_modules/lodash-es/_baseClone.js");const i=function(e,t){return t="function"==typeof t?t:void 0,(0,o.Z)(e,5,t)}},"../node_modules/lodash-es/concat.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var o=s("../node_modules/lodash-es/_arrayPush.js"),i=s("../node_modules/lodash-es/_baseFlatten.js"),r=s("../node_modules/lodash-es/_copyArray.js"),a=s("../node_modules/lodash-es/isArray.js");const n=function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),s=arguments[0],n=e;n--;)t[n-1]=arguments[n];return(0,o.Z)((0,a.Z)(s)?(0,r.Z)(s):[s],(0,i.Z)(t,1))}},"../node_modules/lodash-es/findKey.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const o=function(e,t,s){var o;return s(e,(function(e,s,i){if(t(e,s,i))return o=s,!1})),o};var i=s("../node_modules/lodash-es/_baseForOwn.js"),r=s("../node_modules/lodash-es/_baseIteratee.js");const a=function(e,t){return o(e,(0,r.Z)(t,3),i.Z)}},"../node_modules/lodash-es/flowRight.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const o=(0,s("../node_modules/lodash-es/_createFlow.js").Z)(!0)},"../node_modules/lodash-es/keyBy.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var o=s("../node_modules/lodash-es/_baseAssignValue.js");const i=(0,s("../node_modules/lodash-es/_createAggregator.js").Z)((function(e,t,s){(0,o.Z)(e,s,t)}))},"../node_modules/lodash-es/reject.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var o=s("../node_modules/lodash-es/_arrayFilter.js"),i=s("../node_modules/lodash-es/_baseFilter.js"),r=s("../node_modules/lodash-es/_baseIteratee.js"),a=s("../node_modules/lodash-es/isArray.js"),n=s("../node_modules/lodash-es/negate.js");const d=function(e,t){return((0,a.Z)(e)?o.Z:i.Z)(e,(0,n.Z)((0,r.Z)(t,3)))}},"../node_modules/lodash-es/truncate.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>Z});var o=s("../node_modules/lodash-es/_baseToString.js"),i=s("../node_modules/lodash-es/_castSlice.js"),r=s("../node_modules/lodash-es/_hasUnicode.js"),a=s("../node_modules/lodash-es/isObject.js"),n=s("../node_modules/lodash-es/_baseGetTag.js"),d=s("../node_modules/lodash-es/isObjectLike.js");const l=function(e){return(0,d.Z)(e)&&"[object RegExp]"==(0,n.Z)(e)};var c=s("../node_modules/lodash-es/_baseUnary.js"),p=s("../node_modules/lodash-es/_nodeUtil.js"),u=p.Z&&p.Z.isRegExp;const h=u?(0,c.Z)(u):l;var m=s("../node_modules/lodash-es/_stringSize.js"),g=s("../node_modules/lodash-es/_stringToArray.js"),f=s("../node_modules/lodash-es/toInteger.js"),y=s("../node_modules/lodash-es/toString.js"),j=/\w*$/;const Z=function(e,t){var s=30,n="...";if((0,a.Z)(t)){var d="separator"in t?t.separator:d;s="length"in t?(0,f.Z)(t.length):s,n="omission"in t?(0,o.Z)(t.omission):n}var l=(e=(0,y.Z)(e)).length;if((0,r.Z)(e)){var c=(0,g.Z)(e);l=c.length}if(s>=l)return e;var p=s-(0,m.Z)(n);if(p<1)return n;var u=c?(0,i.Z)(c,0,p).join(""):e.slice(0,p);if(void 0===d)return u+n;if(c&&(p+=u.length-p),h(d)){if(e.slice(p).search(d)){var Z,_=u;for(d.global||(d=RegExp(d.source,(0,y.Z)(j.exec(d))+"g")),d.lastIndex=0;Z=d.exec(_);)var w=Z.index;u=u.slice(0,void 0===w?p:w)}}else if(e.indexOf((0,o.Z)(d),p)!=p){var b=u.lastIndexOf(d);b>-1&&(u=u.slice(0,b))}return u+n}},"../node_modules/lodash-es/xor.js":(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var o=s("../node_modules/lodash-es/_arrayFilter.js"),i=s("../node_modules/lodash-es/_baseRest.js"),r=s("../node_modules/lodash-es/_baseDifference.js"),a=s("../node_modules/lodash-es/_baseFlatten.js"),n=s("../node_modules/lodash-es/_baseUniq.js");const d=function(e,t,s){var o=e.length;if(o<2)return o?(0,n.Z)(e[0]):[];for(var i=-1,d=Array(o);++i<o;)for(var l=e[i],c=-1;++c<o;)c!=i&&(d[i]=(0,r.Z)(d[i]||l,e[c],t,s));return(0,n.Z)((0,a.Z)(d,1),t,s)};var l=s("../node_modules/lodash-es/isArrayLikeObject.js");const c=(0,i.Z)((function(e){return d((0,o.Z)(e,l.Z))}))}}]);