"use strict";(globalThis.webpackChunkcalypso=globalThis.webpackChunkcalypso||[]).push([[20071],{"./components/data/query-post-types/index.jsx":(e,t,s)=>{s.d(t,{Z:()=>l});var r=s("../node_modules/prop-types/index.js"),n=s.n(r),o=s("../node_modules/react/index.js"),i=s("../node_modules/react-redux/es/index.js"),a=s("./state/post-types/actions.js"),c=s("./state/selectors/get-site-setting.js"),u=s("./state/sites/selectors/get-site-option.ts");const d=(e,t)=>s=>(0,c.Z)(s,e,t);function p({siteId:e}){const t=(0,i.I0)(),s=(0,i.v9)((t=>(0,u.Z)(t,e,"theme_slug"))),r=(0,i.v9)(d(e,"jetpack_testimonial")),n=(0,i.v9)(d(e,"jetpack_portfolio"));return(0,o.useEffect)((()=>{e&&t((0,a.r)(e))}),[t,e,s,r,n]),null}p.propTypes={siteId:n().number.isRequired};const l=p},"./data/block-editor/with-block-editor-settings.js":(e,t,s)=>{s.d(t,{Z:()=>l});var r=s("../node_modules/@wordpress/compose/build-module/utils/create-higher-order-component/index.js"),n=s("../node_modules/react-redux/es/index.js"),o=s("./state/current-user/selectors.js"),i=s("./state/ui/selectors/get-selected-site-id.js"),a=s("../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),c=s("./lib/wp/browser.js"),u=s("./state/index.ts"),d=s("./state/themes/selectors/get-active-theme.ts");var p=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=(0,r.o)((e=>t=>{const s=(0,n.v9)(i.Z),r=(0,n.v9)(o.Pc),{data:l,isLoading:m}=((e,t=!1)=>{const s=(0,u.v9)((t=>(0,d.z)(t,e))),r=["blockEditorSettings",e,s];return(0,a.a)({queryKey:r,queryFn:()=>c.Z.req.get({path:`/sites/${e}/block-editor`,apiNamespace:"wpcom/v2"}),enabled:t&&!!e})})(s,r);return(0,p.tZ)(e,{...t,blockEditorSettings:l,areBlockEditorSettingsLoading:m})}),"withBlockEditorSettings")},"./lib/version-compare/index.js":(e,t,s)=>{s.d(t,{Z:()=>r});const r=function(e,t,s){let r=0,n=0,o=0;const i={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},a=function(e){return(e=(e=(""+e).replace(/[_\-+]/g,".")).replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,".")).length?e.split("."):[-8]},c=function(e){return e?isNaN(e)?i[e]||-7:parseInt(e,10):0};for(e=a(e),t=a(t),n=Math.max(e.length,t.length),r=0;r<n;r++)if(e[r]!=t[r]){if(e[r]=c(e[r]),t[r]=c(t[r]),e[r]<t[r]){o=-1;break}if(e[r]>t[r]){o=1;break}}if(!s)return o;switch(s){case">":case"gt":return o>0;case">=":case"ge":return o>=0;case"<=":case"le":return o<=0;case"==":case"=":case"eq":return 0===o;case"<>":case"!=":case"ne":return 0!==o;case"":case"<":case"lt":return o<0;default:return null}}},"./state/admin-menu/selectors/index.js":(e,t,s)=>{s.d(t,{Z:()=>r,a:()=>n});s("./state/admin-menu/init.js");function r(e,t){const s=e?.adminMenu?.menus;return s&&t&&e.adminMenu.menus[t]||null}function n(e){const t=e?.adminMenu?.requesting;return t?e.adminMenu.requesting:null}},"./state/editor/image-editor/constants.js":(e,t,s)=>{s.d(t,{Pr:()=>r,V3:()=>n,WC:()=>o});const r={FREE:"FREE",ORIGINAL:"ORIGINAL",ASPECT_1X1:"ASPECT_1X1",ASPECT_16X9:"ASPECT_16X9",ASPECT_4X3:"ASPECT_4X3",ASPECT_3X2:"ASPECT_3X2"},n={WIDTH:50,HEIGHT:50},o=Object.values(r)},"./state/editor/image-editor/reducer.js":(e,t,s)=>{s.d(t,{Rc:()=>u,ZP:()=>d});var r=s("./state/action-types.ts"),n=s("./state/utils/reducer-utils.ts"),o=s("./state/editor/image-editor/constants.js");const i={degrees:0,scaleX:1,scaleY:1},a={src:"",fileName:"default",mimeType:"image/png",title:"default"},c={topBound:0,leftBound:0,bottomBound:100,rightBound:100},u={topRatio:0,leftRatio:0,widthRatio:1,heightRatio:1};const d=(0,n.U)({hasChanges:function(e=!1,t){switch(t.type){case r.R3q:case r.Rev:case r.KM:case r.DEG:return!0;case r.uGF:case r.WfO:return!1;case r.URu:case r.r8n:return e}return e},fileInfo:function(e=a,t){switch(t.type){case r.upe:{const{src:s,fileName:r,mimeType:n,title:o}=t;return{...e,src:s,fileName:r,mimeType:n,title:o}}case r.WfO:return{...e,...a}}return e},transform:function(e=i,t){switch(t.type){case r.KM:return Object.assign({},e,{degrees:(e.degrees-90)%360});case r.DEG:return Object.assign({},e,{scaleX:-e.scaleX});case r.uGF:case r.WfO:return Object.assign({},i)}return e},cropBounds:function(e=c,t){return t.type===r.qoL?Object.assign({},e,{topBound:t.topBound,leftBound:t.leftBound,bottomBound:t.bottomBound,rightBound:t.rightBound}):e},crop:function(e=u,t){switch(t.type){case r.Rev:case r.r8n:return Object.assign({},e,{topRatio:t.topRatio,leftRatio:t.leftRatio,widthRatio:t.widthRatio,heightRatio:t.heightRatio});case r.KM:return{topRatio:1-e.widthRatio-e.leftRatio,leftRatio:e.topRatio,widthRatio:e.heightRatio,heightRatio:e.widthRatio};case r.DEG:return Object.assign({},e,{leftRatio:1-e.widthRatio-e.leftRatio});case r.uGF:case r.WfO:return Object.assign({},u)}return e},aspectRatio:function(e=o.Pr.FREE,t){switch(t.type){case r.R3q:case r.URu:return t.ratio;case r.uGF:case r.WfO:{const{additionalData:e={}}=t,{aspectRatio:s}=e;return s&&o.Pr[s]?s:o.Pr.FREE}}return e},originalAspectRatio:(e=null,t)=>{switch(t.type){case r.Rb3:{const{width:e,height:s}=t;return{width:e,height:s}}case r.WfO:return null}return e},imageIsLoading:function(e=!0,t){switch(t.type){case r.Rb3:return!1;case r.WfO:return!0}return e}})},"./state/editor/init.js":(e,t,s)=>{var r=s("./state/redux-store.ts"),n=s("../packages/state-utils/src/index.ts"),o=s("./state/action-types.ts"),i=s("./state/utils/reducer-utils.ts"),a=s("./state/editor/image-editor/reducer.js");const c=(0,i.U)({showError:(e,{type:t})=>t===o.nq_,uploadProgress:(e=null,{type:t,percentage:s})=>o.zSg===t?s:o.htm===t?null:e,url:(e=null,{type:t,posterUrl:s})=>o.htm===t?s:e});const u=(0,i.U)({postId:function(e=null,t){switch(t.type){case o.gQI:return t.postId;case o.cnn:return null;case o.hZH:return e===t.postId?t.savedPost.ID:e}return e},isIframeLoaded:function(e=!1,t){if(t.type===o.rQz){const s=t.isIframeLoaded;return void 0!==s?s:e}return e},iframePort:(e=null,t)=>{if(t.type===o.rQz){return t.isIframeLoaded&&t.iframePort?t.iframePort:null}return e},imageEditor:a.ZP,videoEditor:c}),d=(0,n.xi)("editor",u);(0,r.x)(["editor"],d)},"./state/editor/selectors.ts":(e,t,s)=>{s.d(t,{$E:()=>p,BN:()=>c,D9:()=>d,Nw:()=>m,To:()=>u,cX:()=>l});var r=s("../node_modules/lodash-es/get.js"),n=s("./lib/url/add-query-args.ts"),o=s("./state/posts/selectors/get-edited-post.js"),i=s("./state/selectors/get-editor-url.ts"),a=s("./state/sites/selectors/get-site-slug.js");s("./state/editor/init.js");function c(e){return e.editor.postId}function u(e){return!c(e)}function d(e,t,s,r="post"){return(0,n.Z)({"jetpack-copy":s},(0,i.Z)(e,t,null,r))}function p(e,t,s,n="post"){if(!t)return"post";const i=(0,o.P)(e,t,s);let c=function(e,t,s="post"){let r;switch(s){case"post":r="/post";break;case"page":r="/page";break;default:r=`/edit/${s}`}const n=(0,a.Z)(e,t);return r+=n?`/${n}`:`/${t}`,r}(e,t,(0,r.Z)(i,"type",n));return s&&(c+=`/${s}`),c}function l(e){return e.editor.isIframeLoaded}function m(e){return e.editor.iframePort}},"./state/post-types/actions.js":(e,t,s)=>{s.d(t,{s:()=>a,r:()=>c});var r=s("./state/action-types.ts"),n=s("./state/data-layer/handler-registry.js"),o=s("./state/data-layer/wpcom-http/actions.js");const i=(0,s("./state/data-layer/wpcom-http/utils.js").BN)({fetch:e=>(0,o.d)({method:"GET",path:`/sites/${e.siteId}/post-types`},e),onSuccess:(e,t)=>a(e.siteId,t.post_types),onError:()=>{}});(0,n.Z9)("state/data-layer/wpcom/sites/post-types/index.js",{[r.aH1]:[i]});s("./state/post-types/init.js");function a(e,t){return{type:r.EXL,siteId:e,types:t}}function c(e){return{type:r.aH1,siteId:e}}},"./state/post-types/init.js":(e,t,s)=>{var r=s("./state/redux-store.ts"),n=s("../packages/state-utils/src/index.ts"),o=s("../node_modules/lodash-es/keyBy.js"),i=s("./state/action-types.ts"),a=s("./state/utils/schema-utils.js"),c=s("./state/utils/keyed-reducer.ts"),u=s("./state/utils/with-persistence.ts"),d=s("./state/utils/reducer-utils.ts");var p=s("../node_modules/lodash-es/merge.js");const l=(0,a.G)({type:"object",patternProperties:{"^[0-9]+$":{type:"object",patternProperties:{"^.*$":{type:"array",items:{type:"object",required:["name"],properties:{name:{type:"string"},label:{type:"string"},labels:{type:"object"},description:{type:"string"},hierarchical:{type:"boolean"},public:{type:"boolean"},capabilities:{type:"object"}}}}},additionalProperties:!1}},additionalProperties:!1},((e={},t)=>t.type===i.yGX?{...e,[t.siteId]:{...e[t.siteId],[t.postType]:t.taxonomies}}:e)),m=(0,d.U)({requesting:function(e={},t){switch(t.type){case i.qNU:case i.g0p:case i.onT:return(0,p.Z)({},e,{[t.siteId]:{[t.postType]:i.qNU===t.type}})}return e},items:l}),h=(0,a.G)({type:"object",additionalProperties:!1,patternProperties:{"^\\d+$":{type:"object",additionalProperties:{type:"object",required:["name"],properties:{name:{type:"string"},label:{type:"string"},labels:{type:"object"},description:{type:"string"},map_meta_cap:{type:"boolean"},capabilities:{type:"object"},api_queryable:{type:"boolean"},hierarchical:{type:"boolean"},supports:{type:"object"}}}}}},(0,c.J)("siteId",(0,u.$)(((e=null,t)=>t.type===i.EXL?(0,o.Z)(t.types,"name"):e)))),y=(0,d.U)({items:h,taxonomies:m}),g=(0,n.xi)("postTypes",y);(0,r.x)(["postTypes"],g)},"./state/post-types/selectors.js":(e,t,s)=>{s.d(t,{ZI:()=>a,ec:()=>r,jS:()=>o,m_:()=>i,z_:()=>n});s("./state/post-types/init.js");function r(e,t){return e.postTypes.items[t]||null}function n(e,t,s){const n=r(e,t);return n&&n[s]||null}function o(e,t,s,r,o){const i=n(e,t,s);if(i){let e=i.labels[r];return!o||"en"!==o&&"en-gb"!==o||(e=e[0].toUpperCase()+e.slice(1).toLowerCase()),e}return null}function i(e,t,s,r){if("post"===s)if("publicize"===r)return!0;const o=n(e,t,s);if(o)return!!o.supports[r];if("page"===s)if("publicize"===r)return!1;return null}function a(e,t,s){const n=r(e,t);return!!n&&!!n[s]}},"./state/posts/actions/restore-post.js":(e,t,s)=>{s.d(t,{t:()=>d});var r=s("../packages/i18n-calypso/src/index.js"),n=s("../node_modules/lodash-es/truncate.js"),o=s("./lib/wp/browser.js"),i=s("./state/action-types.ts"),a=s("./state/notices/actions.ts"),c=s("./state/posts/actions/receive-post.js"),u=s("./state/posts/selectors/get-site-post.js");s("./state/posts/init.js");function d(e,t,s=!1){return(d,p)=>{d({type:i.F1Z,siteId:e,postId:t});const l=o.Z.site(e).post(t).restore();return l.then((n=>{d({type:i.rn5,siteId:e,postId:t}),d((0,c.h)(n)),s||d((0,a.RT)((0,r.Iu)("Post successfully restored")))}),(o=>{if(d({type:i.JZv,siteId:e,postId:t,error:o}),s)return;const c=(0,u.i)(p(),e,t);let l;l=c?(0,r.Iu)('An error occurred while restoring "%s"',{args:[(0,n.Z)(c.title,{length:24})]}):(0,r.Iu)("An error occurred while restoring the post"),d((0,a.tF)(l))})),l}}},"./state/posts/actions/save-post-success.js":(e,t,s)=>{s.d(t,{j:()=>a});var r=s("../packages/i18n-calypso/src/index.js"),n=s("./state/action-types.ts"),o=s("./state/notices/actions.ts"),i=s("./state/posts/actions/restore-post.js");s("./state/posts/init.js");function a(e,t=null,s,a,c=!1){return u=>{if(u({type:n.hZH,siteId:e,postId:t,savedPost:s,post:a}),!c)switch(a.status){case"trash":{const e="trash_"+s.global_ID;u((0,o.RT)((0,r.Iu)("Post successfully moved to trash."),{id:e,button:(0,r.Iu)("Undo"),onClick:()=>{u((0,o.qq)(e)),u((0,i.t)(s.site_ID,s.ID))}}));break}case"publish":u((0,o.RT)((0,r.Iu)("Post successfully published")))}}}},"./state/posts/actions/trash-post.js":(e,t,s)=>{s.d(t,{W:()=>a});var r=s("./lib/wp/browser.js"),n=s("./state/action-types.ts"),o=s("./state/posts/actions/receive-post.js"),i=s("./state/posts/actions/save-post-success.js");s("./state/posts/init.js");function a(e,t,s=!1){return a=>{const c={status:"trash"};a({type:n.CNw,siteId:e,postId:t,post:c});const u=r.Z.site(e).post(t).delete();return u.then((r=>{a((0,i.j)(e,t,r,c,s)),a((0,o.h)(r))}),(s=>{a({type:n.am4,siteId:e,postId:t,error:s})})),u}}},"./state/posts/selectors/get-edited-post.js":(e,t,s)=>{s.d(t,{P:()=>b});var r=s("../packages/state-utils/src/index.ts"),n=s("../node_modules/lodash-es/get.js"),o=s("../node_modules/lodash-es/reduce.js"),i=s("../node_modules/lodash-es/isEmpty.js"),a=s("../node_modules/lodash-es/mapValues.js"),c=s("../node_modules/lodash-es/map.js");function u(e){return e?function(e){if(!e||!e.terms)return e;const t=(0,o.Z)(e.terms,((e,t,s)=>{const r=Object.values(t);return r&&r.length&&("object"!=typeof r[0]||null===r[0])||(e[s]=r),e}),{});return(0,i.Z)(t)?e:{...e,terms_by_id:(0,a.Z)(t,(e=>{const t=(0,c.Z)(e,"ID");return t.length?t:null}))}}(e):null}var d=s("./state/posts/utils/merge-post-edits.js");s("./state/posts/init.js");const p=(0,r.P1)(((e,t,s)=>{const r=(0,n.Z)(e.posts.edits,[t,s||""]);return r?u((0,d.Z)(...r)):null}),(e=>[e.posts.edits]));var l=s("./state/posts/selectors/get-site-post.js"),m=s("../node_modules/lodash-es/find.js"),h=s("../node_modules/lodash-es/concat.js"),y=s("../node_modules/lodash-es/reject.js"),g=s("../node_modules/lodash-es/mergeWith.js"),f=s("../node_modules/lodash-es/cloneDeep.js");function j(e,t){switch(t.operation){case"update":{const{key:s,value:r}=t;return(0,m.Z)(e,{key:s})?(0,c.Z)(e,(e=>e.key===s?{key:s,value:r}:e)):(0,h.Z)(e||[],{key:s,value:r})}case"delete":{const{key:s}=t;return(0,m.Z)(e,{key:s})?(0,y.Z)(e,{key:s}):e}}return e}function I(e,t){return(0,g.Z)((0,f.Z)(e),t,((e,t,s,r,n,i)=>"metadata"===s&&0===i.size?function(e,t){return(0,o.Z)(t,j,e)}(e,t):Array.isArray(t)?t:void 0))}const b=(0,r.P1)(((e,t,s)=>{const r=(0,l.i)(e,t,s),n=p(e,t,s);return n?I(r,n):r}),(e=>[e.posts.queries,e.posts.edits]))},"./state/selectors/get-editor-url.ts":(e,t,s)=>{s.d(t,{Z:()=>p,y:()=>d});var r=s("./lib/url/add-query-args.ts"),n=s("./state/editor/selectors.ts"),o=s("./state/selectors/is-vip-site.js"),i=s("./state/selectors/should-calypsoify-jetpack.js"),a=s("./state/selectors/should-load-gutenframe.js"),c=s("./state/sites/selectors/get-site-admin-url.ts"),u=s("./state/sites/selectors/get-site-slug.js");const d=(e,t,s="",d="post")=>{if(!(0,a.Z)(e,t,d)){const n=(0,c.Z)(e,t);let a=`${n}post-new.php?post_type=${d}`;return s&&(a=`${n}post.php?post=${s}&action=edit`),!(0,o.Z)(e,t)&&(0,i.P)(e,t)&&(a=(0,r.Z)({calypsoify:"1"},a)),a}if(s)return(0,n.$E)(e,t,s,d);const p=(0,u.Z)(e,t);return"post"===d||"page"===d?`/${d}/${p}`:`/edit/${d}/${p}`},p=d},"./state/selectors/get-site-setting.js":(e,t,s)=>{s.d(t,{Z:()=>o});var r=s("../node_modules/lodash-es/get.js"),n=s("./state/site-settings/selectors.js");function o(e,t,s){return(0,r.Z)((0,n.$1)(e,t),[s],null)}},"./state/selectors/should-calypsoify-jetpack.js":(e,t,s)=>{s.d(t,{P:()=>i,Z:()=>a});s("./state/gutenberg-iframe-eligible/init.js");var r=s("./lib/version-compare/index.js"),n=s("./state/selectors/is-site-automated-transfer.ts"),o=s("./state/sites/selectors/get-site-option.ts");const i=(e,t)=>{const s=(0,o.Z)(e,t,"jetpack_version");return!(s&&(0,r.Z)(s,"9.2-alpha",">=")&&(0,r.Z)(s,"9.2.1","<")&&!(0,n.Z)(e,t))},a=i},"./state/selectors/should-load-gutenframe.js":(e,t,s)=>{s.d(t,{Z:()=>c,F:()=>a});var r=s("../node_modules/lodash-es/get.js"),n=s("./state/selectors/should-calypsoify-jetpack.js");const o=(e,t)=>(0,n.Z)(e,t)&&(0,r.Z)(e,["gutenbergIframeEligible",t],!0);var i=s("./state/admin-menu/selectors/index.js");const a=(e,t,s="post")=>o(e,t)&&"default"===((e,t,s="post")=>{const r=(0,i.Z)(e,t);if(!r)return"default";let n="edit-php";"post"!==s&&(n+=`post_type${s}`);const o=r.find((e=>e.slug===n));return o&&o.url.includes("wp-admin/edit.php")?"classic":"default"})(e,t,s),c=a},"./state/themes/constants.js":(e,t,s)=>{s.d(t,{w:()=>r});const r={search:"",tier:"",filter:"",number:20,offset:0,page:1}},"./state/themes/init.js":(e,t,s)=>{var r=s("./state/redux-store.ts"),n=s("../packages/state-utils/src/index.ts"),o=s("../node_modules/lodash-es/omit.js"),i=s("../node_modules/lodash-es/map.js"),a=s("../node_modules/lodash-es/mapValues.js"),c=s("./lib/formatting/decode-entities.ts"),u=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),d=s("./lib/query-manager/paginated/index.js");const p={search:"",tier:"",filter:"",number:20,offset:0,page:1};var l=s("../node_modules/lodash-es/omitBy.js"),m=s("./lib/query-manager/paginated/key.js");function h(e,t){return null==e||p[t]===e}class y extends m.Z{static stringify(e){return super.stringify((0,l.Z)(e,h))}static parse(e){return(0,l.Z)(super.parse(e),h)}}class g extends d.Z{static sort(){}}(0,u.Z)(g,"QueryKey",y),(0,u.Z)(g,"DefaultQuery",p);var f=s("./lib/query-manager/with-query-manager.js"),j=s("./state/themes/action-types.js"),I=s("./state/utils/schema-utils.js"),b=s("./state/utils/with-persistence.ts"),Z=s("./state/utils/reducer-utils.ts");const w={type:"object",properties:{_timestamp:{type:"number"}},patternProperties:{"^(wpcom|wporg|\\d+)$":(0,s("./lib/query-manager/schema.js").v)({title:"Theme",additionalProperties:!1,type:"object",patternProperties:{"^[\\w-]+$":{additionalProperties:!0,required:["id","name","author","screenshot"],type:"object",properties:{active:{type:"boolean"},author:{type:"string"},author_uri:{type:"string"},autoupdate:{type:"boolean"},autoupdate_translation:{type:"boolean"},demo_uri:{type:"string"},description:{type:"string"},id:{type:"string"},name:{type:"string"},price:{type:"string"},screenshot:{type:"string"},stylesheet:{type:"string"},tags:{type:"array",items:{type:"string"}},taxonomies:{type:"object"},theme_uri:{type:"string"},update:{type:["null","object"]},version:{type:"string"},seo_title:{type:"string"},seo_description:{type:"string"}}}}})},additionalProperties:!1};const _=(0,Z.U)({backPath:function(e="/themes",t){return t.type===j.AT&&void 0!==t.path?t.path:e},themesBookmark:function(e="",t){return j.R2===t.type?t.payload:e}}),v=(0,Z.U)({uploadedThemeId:(e={},t)=>{switch(t.type){case j.Rb:{const{siteId:s,themeId:r}=t;return{...e,[s]:r}}case j.rV:{const{siteId:s,themeId:r}=t;return{...e,[s]:r}}case j.Mv:{const{siteId:s}=t;return(0,o.Z)(e,s)}case j.QS:{const{siteId:s}=t;return(0,o.Z)(e,s)}case j.LG:{const{siteId:s}=t;return(0,o.Z)(e,s)}}return e},uploadError:(e={},t)=>{switch(t.type){case j.O_:{const{siteId:s,error:r}=t;return{...e,[s]:r}}case j.VD:{const{siteId:s,error:r}=t;return{...e,[s]:r}}case j.aB:{const{siteId:s,error:r}=t;return{...e,[s]:r}}case j.Mv:{const{siteId:s}=t;return(0,o.Z)(e,s)}case j.QS:{const{siteId:s}=t;return(0,o.Z)(e,s)}case j.LG:{const{siteId:s}=t;return(0,o.Z)(e,s)}}return e},progressLoaded:(e={},t)=>{switch(t.type){case j.PM:{const{siteId:s,loaded:r}=t;return{...e,[s]:r}}case j.A2:{const{siteId:s,loaded:r}=t;return{...e,[s]:r}}case j.Mv:{const{siteId:s}=t;return(0,o.Z)(e,s)}case j.QS:{const{siteId:s}=t;return(0,o.Z)(e,s)}case j.LG:{const{siteId:s}=t;return(0,o.Z)(e,s)}}return e},progressTotal:(e={},t)=>{switch(t.type){case j.PM:{const{siteId:s,total:r}=t;return{...e,[s]:r}}case j.A2:{const{siteId:s,total:r}=t;return{...e,[s]:r}}case j.Mv:{const{siteId:s}=t;return(0,o.Z)(e,s)}case j.QS:{const{siteId:s}=t;return(0,o.Z)(e,s)}case j.LG:{const{siteId:s}=t;return(0,o.Z)(e,s)}}return e},inProgress:(e={},t)=>{switch(t.type){case j.QS:{const{siteId:s}=t;return{...e,[s]:!0}}case j.LG:{const{siteId:s}=t;return{...e,[s]:!0}}case j.Mv:{const{siteId:s}=t;return{...e,[s]:!1}}case j.Rb:{const{siteId:s}=t;return{...e,[s]:!1}}case j.O_:{const{siteId:s}=t;return{...e,[s]:!1}}case j.rV:{const{siteId:s,status:r}=t;return{...e,[s]:"complete"!==r}}case j.aB:{const{siteId:s}=t;return{...e,[s]:!1}}case j.VD:{const{siteId:s}=t;return{...e,[s]:!1}}}return e},isTransferComplete:(e={},t)=>{if(t.type===j.rV){const{siteId:s,status:r}=t;return{...e,[s]:"complete"===r}}return e}});var R=s("./state/themes/utils.js");const P=(0,I.G)({type:"object",patternProperties:{"^\\d+$":{description:"Theme ID",type:"string"}}},((e={},t)=>{switch(t.type){case j.hX:{const{siteId:s,themeStylesheet:r}=t;return{...e,[s]:(0,R.ph)(r)}}case j.a5:{const{siteId:s,theme:r}=t;return{...e,[s]:r.id}}}return e}));const x=(0,I.G)({type:"object",patternProperties:{"^(wpcom|wporg|\\d+)$":{type:"object",patternProperties:{"^\\w+$":{type:"object",properties:{path:{type:"string"},method:{type:"string"},name:{type:"string"},statusCode:{type:"number"},status:{type:"number"},message:{type:"string"},error:{type:"string"}}}}}}},((e={},t)=>{switch(t.type){case j.Iz:{const{siteId:s,themeId:r,error:n}=t;return{...e,[s]:{...e[s],[r]:n}}}case j.Mo:{const{siteId:s,themeId:r}=t;return{...e,[s]:(0,o.Z)(e[s],r)}}}return e}));function q(e){return e&&e.description?("string"!=typeof e.demo_uri&&(e.demo_uri=void 0),{...e,description:(0,c.S)(e.description)}):e}const k=(0,I.G)(w,(0,b.$)(((e={},t)=>{switch(t.type){case j.K6:{const{siteId:s,query:r,themes:n,found:o}=t;return(0,f.Z)(e,s,(e=>e.receive((0,i.Z)(n,q),{query:r,found:o,patch:!0,dontShareQueryResultsWhenQueriesAreDifferent:!0})),(()=>new g(null,{itemKey:"id"})))}case j.AH:{const{siteId:s,themeId:r}=t;return(0,f.Z)(e,s,(e=>e.removeItem(r)))}}return e}),{serialize:e=>{const t=(0,a.Z)(e,(({data:e,options:t})=>({data:e,options:t})));return t._timestamp=Date.now(),t},deserialize:e=>e._timestamp&&e._timestamp+864e5<Date.now()?{}:(0,a.Z)((0,o.Z)(e,"_timestamp"),(({data:e,options:t})=>new g(e,t)))})),T=(0,I.G)({type:"object",patternProperties:{"^[\\w-]+$":{title:"Taxonomy",type:"object",patternProperties:{"^\\w+$":{title:"Term",type:"object",properties:{name:{type:"string"},description:{type:"string"}}}},uniqueItems:!0}},additionalProperties:!1},((e={},t)=>{if(t.type===j.Ie){const{filters:e}=t;return e}return e}));const E=(0,Z.U)({queries:k,queryRequests:function(e={},t){let s;switch(t.type){case j.Fg:case j.K6:case j.In:return s=(0,R.cZ)(t.query,t.siteId),Object.assign({},e,{[s]:j.Fg===t.type})}return e},queryRequestErrors:(e={},t)=>{switch(t.type){case j.In:{const{siteId:s,query:r,error:n}=t,o=(0,R.cZ)(r,s);return{...e,[s]:{...e[s],[o]:n}}}case j.K6:{const{siteId:s,query:r}=t,n=(0,R.cZ)(r,s);return{...e,[s]:(0,o.Z)(e[s],n)}}}return e},lastQuery:(e={},t)=>{if(t.type===j.K6){const{siteId:s,query:r}=t;return{...e,[s]:r}}return e},themeInstalls:function(e={},t){switch(t.type){case j.pS:case j.Yg:case j.Si:return Object.assign({},e,{[t.siteId]:Object.assign({},e[t.siteId],{[t.themeId]:j.pS===t.type})})}return e},themeRequests:function(e={},t){switch(t.type){case j.KU:case j.Mo:case j.Iz:return Object.assign({},e,{[t.siteId]:Object.assign({},e[t.siteId],{[t.themeId]:j.KU===t.type})})}return e},themeRequestErrors:x,activeThemes:P,activeThemeRequests:function(e={},t){switch(t.type){case j.PG:case j.a5:case j.S_:return{...e,[t.siteId]:j.PG===t.type}}return e},activationRequests:function(e={},t){switch(t.type){case j.Qe:case j.hX:case j.q8:return{...e,[t.siteId]:j.Qe===t.type}}return e},completedActivationRequests:(e={},t)=>{switch(t.type){case j.hX:{const{siteId:s}=t;return{...e,[s]:!0}}case j.KC:{const{siteId:s}=t;return{...e,[s]:!1}}}return e},themesUI:_,uploadTheme:v,themePreviewOptions:(e={},t)=>{if(t.type===j.MC){const{themeId:e,primary:s,secondary:r,styleVariation:n}=t;return{themeId:e,primary:s,secondary:r,styleVariation:n}}return e},themePreviewVisibility:(e=null,t)=>{if(t.type===j.rF){const{themeId:e}=t;return e}return e},themeFilters:T,themeFilterRequestError:function(e=null,t){switch(t.type){case j.es:return t.error;case j.Ie:return null}return e},recommendedThemes:function(e={},t){switch(t.type){case j.a:return{...e,[t.filter]:{isLoading:!0,themes:e[t.filter]?.themes??[]}};case j.gI:return{...e,[t.filter]:{isLoading:!1,themes:t.payload.themes}};case j.rZ:return{...e,[t.filter]:{isLoading:!1,themes:e[t.filter]?.themes??[]}}}return e},trendingThemes:function(e={},t){switch(t.type){case j._F:return{...e,isLoading:!0,themes:[]};case j.t1:return{...e,isLoading:!1,themes:t.payload.themes};case j.$i:return{...e,isLoading:!1,themes:[]}}return e},themeHasAutoLoadingHomepageWarning:(e=null,t)=>{switch(t.type){case j.v5:return{themeId:t.themeId,show:!0,accepted:!1};case j.kc:return{themeId:t.themeId,show:!1,accepted:!0};case j.Qe:case j.hX:case j.q8:case j.Fp:return null}return e},themesUpdate:function(e={},t){const s=e.themesUpdating||[],r=e.themesUpdated||[],n=e.themesUpdateFailed||[];switch(t.type){case j.w_:return{...e,themesUpdating:[...s,...t.themeSlugs.filter((e=>-1===s.indexOf(e)))],themesUpdateFailed:[...(e.themesUpdateFailed||[]).filter((e=>-1===t.themeSlugs.indexOf(e)))]};case j.uG:return{...e,themesUpdating:[...(e.themesUpdating||[]).filter((e=>-1===t.themeSlugs.indexOf(e)))],themesUpdated:[...r,...t.themeSlugs.filter((e=>-1===r.indexOf(e)))]};case j.Nf:return{...e,themesUpdating:[...(e.themesUpdating||[]).filter((e=>-1===t.themeSlugs.indexOf(e)))],themesUpdateFailed:[...n,...t.themeSlugs.filter((e=>-1===n.indexOf(e)))]}}return e},upsellCardDisplayed:function(e=!1,t){if(t.type===j.$j){const{displayed:e}=t;return e}return e},isLoadingCart:function(e=!1,t){if(t.type===j.pR){const{isLoading:e}=t;return e}return e},startActivationSync:function(e={},{type:t,siteId:s,themeId:r}){switch(t){case j.BW:return{...e,[s]:{...e[s],[r]:!0}};case j.Go:return{...e,[s]:(0,o.Z)(e[s],r)}}return e},themeHasAtomicTransferDialog:(e=null,t)=>{switch(t.type){case j.Bu:return{themeId:t.themeId,show:!0,accepted:!1};case j.hM:return{themeId:t.themeId,show:!1,accepted:!0};case j.Gl:return null}return e}}),L=(0,n.xi)("themes",E);(0,r.x)(["themes"],L)},"./state/themes/selectors/get-active-theme.ts":(e,t,s)=>{s.d(t,{z:()=>r});s("./state/themes/init.js");function r(e,t){if(!t)return null;const s=e.themes.activeThemes[t]??null;return s?s.replace("-wpcom",""):null}},"./state/themes/utils.js":(e,t,s)=>{s.d(t,{I5:()=>m,Iz:()=>y,QW:()=>g,_p:()=>Z,cZ:()=>j,gW:()=>h,k1:()=>I,ph:()=>f,v0:()=>b});var r=s("../node_modules/lodash-es/get.js"),n=s("../node_modules/lodash-es/startsWith.js"),o=s("../node_modules/lodash-es/omit.js"),i=s("../node_modules/lodash-es/map.js"),a=s("../node_modules/lodash-es/mapKeys.js"),c=s("../node_modules/lodash-es/omitBy.js"),u=s("../node_modules/lodash-es/some.js"),d=s("../node_modules/lodash-es/includes.js"),p=s("./state/themes/constants.js");const l=["feature"];function m(e){const t=(0,r.Z)(e,"stylesheet",!1);return t&&(0,n.Z)(t,"premium/")}function h(e={}){return e.tags?{...(0,o.Z)(e,"tags"),taxonomies:{theme_feature:(0,i.Z)(e.tags,(e=>({slug:e})))}}:e}function y(e){const t={description_long:"descriptionLong",support_documentation:"supportDocumentation",download_uri:"download"};return(0,a.Z)(e,((e,s)=>(0,r.Z)(t,s,s)))}function g(e){const t={slug:"id",preview_url:"demo_uri",screenshot_url:"screenshot",download_link:"download"},s=(0,a.Z)((0,o.Z)(e,["sections","author"]),((e,s)=>(0,r.Z)(t,s,s))),n=(0,r.Z)(e,["sections","description"]);n&&(s.description=n);const c=(0,r.Z)(e,["author","display_name"]);return c&&(s.author=c),s.tags?{...(0,o.Z)(s,"tags"),taxonomies:{theme_feature:(0,i.Z)(s.tags,((e,t)=>({name:e,slug:t})))}}:s}function f(e){const[,t]=e?.split("/",2)??[];return t||e}function j(e={},t){const s=function(e){return(0,c.Z)(e,((e,t)=>p.w[t]===e))}(e),r=JSON.stringify(s);return t?[t,r].join(":"):r}function I(e,t){return j((0,o.Z)(e,"page"),t)}function b(e,t){const s={...p.w,...e};return Object.entries(s).every((([e,s])=>{switch(e){case"search":{if(!s)return!0;const e=s.toLowerCase();return(0,u.Z)(l,(s=>t.taxonomies&&(0,u.Z)(t.taxonomies["theme_"+s],(({name:t})=>t&&(0,d.Z)(t.toLowerCase(),e)))))||t.id&&(0,d.Z)(t.id.toLowerCase(),e)||t.name&&(0,d.Z)(t.name.toLowerCase(),e)||t.author&&(0,d.Z)(t.author.toLowerCase(),e)||t.descriptionLong&&(0,d.Z)(t.descriptionLong.toLowerCase(),e)}case"filter":if(!s)return!0;return s.split(",").every((e=>(0,u.Z)(t.taxonomies,(t=>(0,u.Z)(t,{slug:e})))))}return!0}))}function Z(e,t){return(0,r.Z)(e,["taxonomies",t],[]).map((({slug:e})=>e))}}}]);