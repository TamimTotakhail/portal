"use strict";(globalThis.webpackChunkcalypso=globalThis.webpackChunkcalypso||[]).push([[67730],{"./lib/domains/can-current-user-add-email.ts":(t,n,i)=>{function s(t){return!!t?.currentUserCanAddEmail}i.d(n,{P:()=>s})},"./lib/domains/email-forwarding/get-email-forwards-count.js":(t,n,i)=>{function s(t){return t?.emailForwardsCount??0}i.d(n,{P:()=>s})},"./lib/domains/email-forwarding/has-email-forwards.js":(t,n,i)=>{i.d(n,{b:()=>e});var s=i("./lib/domains/email-forwarding/get-email-forwards-count.js");function e(t){return(0,s.P)(t)>0}},"./lib/emails/email-provider-constants.js":(t,n,i)=>{i.d(n,{Br:()=>g,N9:()=>u,Nk:()=>s,X7:()=>f,ZP:()=>c,aD:()=>e,g7:()=>l,nB:()=>a,ng:()=>d,rh:()=>r,v3:()=>m,wR:()=>o});const s="email_forwarding",e="google_workspace",r="google_gsuite",o="titan",a="titan_external",u="email_forward",c="admin",l="google_pending_tos_acceptance",d="unused_mailboxes",m="unverified_forwards",f="other-user-owns-subscription",g="other-user-owns-email"},"./lib/emails/index.js":(t,n,i)=>{function s({mailbox:t,domain:n}){return t&&n?`${t}@${n}`:""}function e(t){return t?.target}function r(t,n){const i=n?.warnings;return(i?.[0]?i:[]).some((n=>t===n?.warning_slug))}i.d(n,{m4:()=>y,xO:()=>s,a_:()=>e,SN:()=>a,JE:()=>u,d9:()=>c,ao:()=>m,Eg:()=>f,Qe:()=>g,T0:()=>p,k8:()=>b.k,je:()=>h,RI:()=>w,DD:()=>v});var o=i("./lib/emails/email-provider-constants.js");function a(t){return r(o.g7,t)}const u=t=>Boolean(t?.introductory_offer??!1),c=t=>u(t)&&0===t?.introductory_offer?.cost_per_interval;var l=i("./lib/gsuite/has-gsuite-with-us.ts"),d=i("./lib/titan/index.js");function m(t){return(0,l.u)(t)||(0,d.zW)(t)}function f(t){return r(o.ng,t)}function g(t){return!!t?.emails?.length&&t.emails.some((t=>!!t?.warnings?.length&&t.warnings.some((t=>t?.warning_slug===o.v3))))}function p(t){return o.N9===t.email_type}var b=i("./lib/emails/is-email-forward-account.js");function h(t){return o.ZP===t?.role}function w(t){return[o.aD,o.rh].includes(t?.account_type)}function v(t){return[o.wR,o.nB].includes(t?.account_type)}var _=i("./lib/domains/can-current-user-add-email.ts"),j=i("./lib/domains/email-forwarding/has-email-forwards.js"),S=i("./lib/gsuite/get-gsuite-product-slug.js"),x=i("./lib/gsuite/get-gsuite-subscription-status.ts");function y(t){const n=Boolean((0,S.s)(t)||(0,d.Si)(t)||(0,j.b)(t)),i="suspended"===(0,x.x)(t);return n&&!i&&(0,_.P)(t)}},"./lib/emails/is-email-forward-account.js":(t,n,i)=>{i.d(n,{k:()=>e});var s=i("./lib/emails/email-provider-constants.js");function e(t){return t?.account_type===s.Nk}},"./lib/gsuite/get-gsuite-product-slug.js":(t,n,i)=>{function s(t){return t?.googleAppsSubscription?.productSlug}i.d(n,{s:()=>s})},"./lib/gsuite/get-gsuite-subscription-status.ts":(t,n,i)=>{function s(t){return t?.googleAppsSubscription?.status??""}i.d(n,{x:()=>s})},"./lib/gsuite/has-gsuite-with-us.ts":(t,n,i)=>{i.d(n,{u:()=>e});var s=i("./lib/gsuite/get-gsuite-subscription-status.ts");function e(t){const n=(0,s.x)(t);return!["","no_subscription","other_provider"].includes(n)}},"./lib/titan/get-titan-urls.js":(t,n,i)=>{i.d(n,{V:()=>r,y:()=>e});const s={CALENDAR:"calendar",CONTACTS:"contacts",EMAIL:"mail"};function e(t){return t?.titanMailSubscription?.appsUrl??"https://wp.titan.email"}function r(t,n,i=!1,e=null){return function(t,n,i=s.EMAIL,e=!1,r=null){const o=new URL(`${t}/${i}/`);return n?.includes("@")&&o.searchParams.append("email_account",n),r&&o.searchParams.append("topbar.redirect_url",r),e&&o.searchParams.append("clearSession","true"),o.href}(t,n,s.EMAIL,i,e)}},"./lib/titan/index.js":(t,n,i)=>{function s(t){return t.titanMailSubscription?.numberOfMailboxes??0}i.d(n,{bd:()=>s,rQ:()=>o,HV:()=>a,VE:()=>b.V,b_:()=>u,E7:()=>d,HC:()=>c,Vz:()=>l,Ck:()=>f,Si:()=>g,oB:()=>p,zW:()=>h,bm:()=>w,dO:()=>v,PA:()=>j,gs:()=>M,Vd:()=>k});var e=i("./lib/domains/can-current-user-add-email.ts"),r=i("./lib/emails/index.js");function o(t,n,i=!1){if(!n)return null;const s=n.filter((t=>function(t,n=!1){return!t.expired&&!t.isWpcomStagingDomain&&!(0,r.ao)(t)&&!!(0,e.P)(t)&&(!n||v(t))}(t,i)));if(0===s.length)return null;const o=s.find((n=>n.name===t));return o||s.sort(((t,n)=>new Date(n.registrationDate).valueOf()-new Date(t.registrationDate).valueOf())).sort(((t,n)=>Number(n.isPrimary??!1)-Number(t.isPrimary??!1)))[0]}function a(t){return t.titanMailSubscription?.maximumMailboxCount??1}function u(t){return t.titanMailSubscription?.expiryDate}function c(t){return t.titanMailSubscription?.purchaseCostPerMailbox}function l(t){return t.titanMailSubscription?.renewalCostPerMailbox}function d(t){return t.titanMailSubscription?.orderId}var m=i("../packages/i18n-calypso/src/index.js");function f(){return(0,m.Iu)("Professional Email",{comment:"This is the name of our Professional Email product"})}function g(t){return t?.titanMailSubscription?.productSlug??null}function p(t){return t?.titanMailSubscription?.subscriptionId}var b=i("./lib/titan/get-titan-urls.js");function h(t){const n=t?.titanMailSubscription?.status??"";return"active"===n||"suspended"===n}function w({domain:t,product:n}){return!!v(t)&&(0,r.d9)(n)}function v(t){return t?.titanMailSubscription?.isEligibleForIntroductoryOffer??!1}var _=i("../packages/calypso-products/src/constants/titan.ts");function j(t){return t?.product_slug===_.A$}var S=i("./my-sites/checkout/composite-checkout/hooks/use-site-domains.ts"),x=i("./state/index.ts"),y=i("./state/ui/selectors/get-selected-site-id.js");function k(){const t=function(){const t=(0,x.v9)(y.Z);return(0,S.Z)(t??void 0).find(h)}();return(0,b.y)(t)}function M(t){let n;return n="amount"in t?t.amount:t.titanMailSubscription?.purchaseCostPerMailbox?.amount,0===n}},"./my-sites/checkout/composite-checkout/hooks/use-site-domains.ts":(t,n,i)=>{i.d(n,{Z:()=>l});var s=i("../node_modules/debug/src/browser.js"),e=i.n(s),r=i("../node_modules/react/index.js"),o=i("./state/index.ts"),a=i("./state/sites/domains/actions.js"),u=i("./state/sites/domains/selectors.js");const c=e()("calypso:composite-checkout:use-site-domains");function l(t){const n=(0,o.I0)(),[i,s]=(0,r.useState)([]),e=(0,o.v9)((n=>!!t&&(0,u.zd)(n,t))),l=(0,o.v9)((n=>(0,u.eT)(n,t)));return(0,r.useEffect)((()=>{e&&l.length>0&&s(l)}),[e,l]),(0,r.useEffect)((()=>{e||t&&(c("Fetching list of domains"),n((0,a.Pz)(t)))}),[e,n,t]),i}},"./state/sites/domains/selectors.js":(t,n,i)=>{i.d(n,{BL:()=>r,CC:()=>o,JZ:()=>l,eT:()=>e,fw:()=>a,hB:()=>u,kJ:()=>d,wb:()=>m,zd:()=>c});const s=Object.freeze([]),e=(t,n)=>n&&t.sites.domains.items[n]||s,r=(t,n)=>{const i=e(t,n);if(!Array.isArray(i))return null;return i.find((({isWPCOMDomain:t,isWpcomStagingDomain:n})=>t||n))||null},o=t=>t.sites.domains.items,a=t=>t.allDomains.domains??[],u=(t,n)=>n?e(t,n.ID):s,c=(t,n)=>!!n&&Boolean(t?.sites?.domains?.items?.[n]),l=(t,n)=>t.sites.domains.requesting[n]||!1,d=t=>t.sites.domains.requesting,m=(t,n,i)=>t?.sites?.domains?.updatingPrivacy?.[n]?.[i]}}]);