"use strict";(globalThis.webpackChunkcalypso=globalThis.webpackChunkcalypso||[]).push([[72674],{"./lib/domains/constants.js":(e,n,a)=>{a.d(n,{Bz:()=>o,DZ:()=>d,ES:()=>c,VL:()=>l,Xy:()=>E,_q:()=>s,domainAvailability:()=>i,dt:()=>t,fN:()=>r,j4:()=>_});const t={MAPPED:"MAPPED",REGISTERED:"REGISTERED",SITE_REDIRECT:"SITE_REDIRECT",WPCOM:"WPCOM",TRANSFER:"TRANSFER"},r={PENDING_OWNER:"PENDING_OWNER",PENDING_REGISTRY:"PENDING_REGISTRY",CANCELLED:"CANCELLED",COMPLETED:"COMPLETED",PENDING_START:"PENDING_START"},o={OPENHRS:"OpenHRS",OPENSRS:"OpenSRS",WWD:"WWD",MAINTENANCE:"Registrar TLD Maintenance"},i={AVAILABLE:"available",AVAILABLE_PREMIUM:"available_premium",AVAILABLE_RESERVED:"available_reserved",AVAILABILITY_CHECK_ERROR:"availability_check_error",CONFLICTING_CNAME_EXISTS:"conflicting_cname_exists",DISALLOWED:"blacklisted_domain",DOMAIN_SUGGESTIONS_THROTTLED:"domain_suggestions_throttled",DOTBLOG_SUBDOMAIN:"dotblog_subdomain",EMPTY_QUERY:"empty_query",EMPTY_RESULTS:"empty_results",FORBIDDEN:"forbidden_domain",FORBIDDEN_SUBDOMAIN:"forbidden_subdomain",IN_REDEMPTION:"in_redemption",INVALID:"invalid_domain",INVALID_QUERY:"invalid_query",INVALID_TLD:"invalid_tld",MAINTENANCE:"tld_in_maintenance",MAPPABLE:"mappable",MAPPED:"mapped_domain",MAPPED_OTHER_SITE_SAME_USER:"mapped_to_other_site_same_user",MAPPED_SAME_SITE_NOT_TRANSFERRABLE:"mapped_to_same_site_not_transferrable",MAPPED_SAME_SITE_TRANSFERRABLE:"mapped_to_same_site_transferrable",NOT_AVAILABLE:"not_available",NOT_REGISTRABLE:"available_but_not_registrable",PURCHASES_DISABLED:"domain_registration_unavailable",RECENT_REGISTRATION_LOCK_NOT_TRANSFERRABLE:"recent_registration_lock_not_transferrable",RECENTLY_UNMAPPED:"recently_mapped",RECENTLY_EXPIRED:"recently_expired",REGISTERED:"registered_domain",REGISTERED_OTHER_SITE_SAME_USER:"registered_on_other_site_same_user",REGISTERED_SAME_SITE:"registered_on_same_site",RESTRICTED:"restricted_domain",SERVER_TRANSFER_PROHIBITED_NOT_TRANSFERRABLE:"server_transfer_prohibited_not_transferrable",TLD_NOT_SUPPORTED:"tld_not_supported",TLD_NOT_SUPPORTED_AND_DOMAIN_NOT_AVAILABLE:"tld_not_supported_and_domain_not_available",TLD_NOT_SUPPORTED_TEMPORARILY:"tld_not_supported_temporarily",TRANSFER_PENDING:"transfer_pending",TRANSFER_PENDING_SAME_USER:"transfer_pending_same_user",TRANSFERRABLE:"transferrable",TRANSFERRABLE_PREMIUM:"transferrable_premium",UNKNOWN:"unknown",UNKOWN_ACTIVE:"unknown_active_domain_with_wpcom",WPCOM_STAGING_DOMAIN:"wpcom_staging_domain"},s={GMAIL:{PROVIDER:"g-suite",SERVICE:"gmail"},G_SUITE:{PROVIDER:"g-suite",SERVICE:"G-Suite"},MICROSOFT_OFFICE365:{PROVIDER:"microsoft-office365",SERVICE:"O365"},TITAN:{PROVIDER:"titan-mail",SERVICE:"titan"},ZOHO_MAIL:{PROVIDER:"zoho-mail",SERVICE:"Zoho"}},_={NONE:"NONE",PENDING:"PENDING",PENDING_ASYNC:"PENDING_ASYNC",ACCEPTED_CONTRACTUAL_MINIMUM:"ACCEPTED_CONTRACTUAL_MINIMUM",ACCEPTED_FULL:"ACCEPTED_FULL",DENIED:"DENIED",FORCED_ALL_CONTRACTUAL:"FORCED_ALL_CONTRACTUAL"},d={DISCOVERY_TXT_RECORD_NAME:"_domainconnect",API_URL:"public-api.wordpress.com/rest/v1.3/domain-connect"},l={SSL_DISABLED:"disabled",SSL_PENDING:"pending",SSL_ACTIVE:"active"},c={DOMAIN_ITEM:"DOMAIN_ITEM",DOMAIN_ROW:"DOMAIN_ROW",PAGE_TITLE:"PAGE_TITLE"},E={MANAGED:"managed",BLOG:"blog"}},"./lib/domains/utils/get-domain-type.js":(e,n,a)=>{a.d(n,{G:()=>r});var t=a("./lib/domains/constants.js");function r(e){return"redirect"===e.type?t.dt.SITE_REDIRECT:"transfer"===e.type?t.dt.TRANSFER:e.wpcom_domain?t.dt.WPCOM:e.has_registration?t.dt.REGISTERED:t.dt.MAPPED}},"./state/sites/domains/actions.js":(e,n,a)=>{a.d(n,{nN:()=>C,A:()=>P,pK:()=>b,Pz:()=>f,UL:()=>L,FX:()=>O});var t=a("../node_modules/debug/src/browser.js"),r=a.n(t),o=a("../packages/i18n-calypso/src/index.js"),i=a("../node_modules/lodash-es/map.js"),s=a("./lib/wp/browser.js"),_=a("./state/action-types.ts"),d=a("./state/sites/actions.js"),l=a("./state/sites/domains/assembler.js"),c=a("../node_modules/lodash-es/get.js"),E=a("./state/data-layer/handler-registry.js"),u=a("./state/data-layer/wpcom-http/actions.js"),m=a("./state/data-layer/wpcom-http/utils.js"),p=a("./state/notices/actions.ts");const R=e=>n=>(0,u.d)({apiVersion:"1",method:"POST",path:"/domains/"+n.domain+"/privacy/"+e},n),I=e=>({siteId:n,domain:a})=>{const t=(e=>{switch(e){case _.ON1:return(0,o.Iu)("Privacy has been successfully disabled!");case _.DGo:return(0,o.Iu)("Yay, privacy has been successfully enabled!");case _.tGX:return(0,o.Iu)("Your contact information is now publicly visible!");case _.HYG:return(0,o.Iu)("Your contact information is now redacted!");default:return""}})(e);return[{type:e,siteId:n,domain:a},(0,p.RT)(t,{duration:5e3})]},N=e=>({siteId:n,domain:a},t)=>{const r=(0,c.Z)(t,"message",(0,o.Iu)("Unknown error when updating the domain privacy settings"));return[{type:e,siteId:n,domain:a},(0,p.tF)(r,{duration:2e4,id:"domain-privacy-settings-save-failure-notice",isPersistent:!0,href:"https://wordpress.com/help/contact",button:(0,o.Iu)("Get Help"),showDismiss:!1})]};(0,E.Z9)("state/data-layer/wpcom/domains/privacy/index.js",{[_.sBg]:[(0,m.BN)({fetch:R("enable"),onSuccess:I(_.DGo),onError:N(_.zVI)})],[_.HCR]:[(0,m.BN)({fetch:R("disable"),onSuccess:I(_.ON1),onError:N(_.T6o)})],[_.w6q]:[(0,m.BN)({fetch:R("disclose"),onSuccess:I(_.tGX),onError:N(_.M5U)})],[_.K1T]:[(0,m.BN)({fetch:R("redact"),onSuccess:I(_.HYG),onError:N(_.sQe)})]});const g=r()("calypso:state:sites:domains:actions"),A=(e,n)=>{const a={type:_.t2O,siteId:e,domains:(0,i.Z)(n,l.e)};return g("returning action: %o",a),a},T=e=>{const n={type:_.wOJ,siteId:e};return g("returning action: %o",n),n},D=e=>{const n={type:_.RI4,siteId:e};return g("returning action: %o",n),n},S=(e,n)=>{const a={type:_.dyA,siteId:e,error:n};return g("returning action: %o",a),a};function f(e){return n=>(n(T(e)),s.Z.req.get(`/sites/${e}/domains`,{apiVersion:"1.2"}).then((a=>{const{domains:t=[],error:r,message:o}=a;if(r)throw new Error(o);n(D(e)),n(A(e,t))})).catch((a=>{const t=a instanceof Error?a.message:(0,o.Iu)("There was a problem fetching site domains. Please try again later or contact support.");n(S(e,t))})))}function b(e,n){return{type:_.sBg,siteId:e,domain:n}}function C(e,n){return{type:_.HCR,siteId:e,domain:n}}const O=(e,n)=>async a=>{g("setPrimaryDomain",e,n),await s.Z.req.post(`/sites/${e}/domains/primary`,{domain:n}),await Promise.all([a((0,d.LV)(e)),a(f(e))])};function P(e,n){return{type:_.w6q,siteId:e,domain:n}}function L(e,n){return{type:_.K1T,siteId:e,domain:n}}},"./state/sites/domains/assembler.js":(e,n,a)=>{a.d(n,{e:()=>c});var t=a("../node_modules/lodash-es/mapKeys.js"),r=a("../node_modules/lodash-es/camelCase.js");var o=a("./lib/domains/constants.js");function i(e){switch(e.gdpr_consent_status){case"NONE":return o.j4.NONE;case"PENDING":return o.j4.PENDING;case"PENDING_ASYNC":return o.j4.PENDING_ASYNC;case"ACCEPTED_CONTRACTUAL_MINIMUM":return o.j4.ACCEPTED_CONTRACTUAL_MINIMUM;case"ACCEPTED_FULL":return o.j4.ACCEPTED_FULL;case"DENIED":return o.j4.DENIED;case"FORCED_ALL_CONTRACTUAL":return o.j4.FORCED_ALL_CONTRACTUAL;default:return null}}var s=a("./lib/domains/utils/get-domain-type.js");function _(e){return"pending_owner"===e.transfer_status?o.fN.PENDING_OWNER:"pending_registry"===e.transfer_status?o.fN.PENDING_REGISTRY:"cancelled"===e.transfer_status?o.fN.CANCELLED:"completed"===e.transfer_status?o.fN.COMPLETED:"pending_start"===e.transfer_status?o.fN.PENDING_START:null}function d(e){if(e)return(0,t.Z)(e,((e,n)=>(0,r.default)(n)))}function l(e){if(!e||!e.errors)return null;const n=Object.entries(e.errors).map((e=>{const[n,a]=e;return{code:n,message:a[0]}}));return n.length?n[0]:null}const c=e=>{let n=null;return e.transfer_start_date&&(n=new Date(e.transfer_start_date),n.setDate(n.getDate()+7),n=n.toISOString()),{aRecordsRequiredForMapping:e.a_records_required_for_mapping,autoRenewalDate:String(e.auto_renewal_date),adminEmail:e.admin_email,aftermarketAuction:Boolean(e.aftermarket_auction),aftermarketAuctionEnd:String(e.aftermarket_auction_end??""),aftermarketAuctionStart:String(e.aftermarket_auction_start??""),autoRenewing:Boolean(e.auto_renewing),beginTransferUntilDate:String(e.begin_transfer_until_date),blogId:Number(e.blog_id),bundledPlanSubscriptionId:e.bundled_plan_subscription_id,canSetAsPrimary:Boolean(e.can_set_as_primary),canManageDnsRecords:Boolean(e.can_manage_dns_records),canManageNameServers:Boolean(e.can_manage_name_servers),canUpdateContactInfo:Boolean(e.can_update_contact_info),cannotManageDnsRecordsReason:e.cannot_manage_dns_records_reason?String(e.cannot_manage_dns_records_reason):null,cannotManageNameServersReason:e.cannot_manage_name_servers_reason?String(e.cannot_manage_name_servers_reason):null,cannotUpdateContactInfoReason:e.cannot_update_contact_info_reason?String(e.cannot_update_contact_info_reason):null,connectionMode:String(e.connection_mode),contactInfoDisclosureAvailable:Boolean(e.contact_info_disclosure_available),contactInfoDisclosed:Boolean(e.contact_info_disclosed),currentUserCanAddEmail:Boolean(e.current_user_can_add_email),currentUserCanCreateSiteFromDomainOnly:Boolean(e.current_user_can_create_site_from_domain_only),currentUserCanManage:Boolean(e.current_user_can_manage),currentUserCannotAddEmailReason:l(e.current_user_cannot_add_email_reason),currentUserIsOwner:Boolean(e.current_user_is_owner),domain:String(e.domain),domainLockingAvailable:Boolean(e.domain_locking_available),domainRegistrationAgreementUrl:(a=e,a?.domain_registration_agreement_url??null),emailForwardsCount:Number(e.email_forwards_count),expired:Boolean(e.expired),expiry:e.expiry?String(e.expiry):null,expirySoon:Boolean(e.expiry_soon),gdprConsentStatus:i(e),googleAppsSubscription:d(e.google_apps_subscription),titanMailSubscription:d(e.titan_mail_subscription),hasRegistration:Boolean(e.has_registration),hasWpcomNameservers:e.has_wpcom_nameservers,hasZone:Boolean(e.has_zone),isLocked:Boolean(e.is_locked),isRenewable:Boolean(e.is_renewable),isRedeemable:Boolean(e.is_redeemable),isEligibleForInboundTransfer:Boolean(e.is_eligible_for_inbound_transfer),isAutoRenewing:Boolean(e.auto_renewing),isIcannVerificationSuspended:"boolean"==typeof e.is_icann_verification_suspended?Boolean(e.is_icann_verification_suspended):null,isPendingIcannVerification:Boolean(e.is_pending_icann_verification),isPendingRenewal:Boolean(e.pending_renewal),isPremium:Boolean(e.is_premium),isPrimary:Boolean(e.primary_domain),isPendingWhoisUpdate:Boolean(e.pending_whois_update),isSubdomain:Boolean(e.is_subdomain),isWPCOMDomain:Boolean(e.wpcom_domain),isWpcomStagingDomain:Boolean(e.is_wpcom_staging_domain),manualTransferRequired:Boolean(e.manual_transfer_required),mustRemovePrivacyBeforeContactUpdate:Boolean(e.must_remove_privacy_before_contact_update),name:String(e.domain),nominetDomainSuspended:Boolean(e.nominet_domain_suspended),nominetPendingContactVerificationRequest:Boolean(e.nominet_pending_contact_verification_request),owner:String(e.owner),partnerDomain:Boolean(e.partner_domain),pendingRegistration:Boolean(e.pending_registration),pendingRegistrationTime:String(e.pending_registration_time),pendingTransfer:e.pending_transfer,pointsToWpcom:Boolean(e.points_to_wpcom),privateDomain:e.private_domain,privacyAvailable:Boolean(e.privacy_available),registrar:String(e.registrar),registrationDate:String(e.registration_date),renewableUntil:String(e.renewable_until),redeemableUntil:String(e.redeemable_until),registryExpiryDate:String(e.registry_expiry_date??""),sslStatus:e.ssl_status?String(e.ssl_status):null,subdomainPart:String(e.subdomain_part),subscriptionId:e.subscription_id,supportsDomainConnect:Boolean(e.supports_domain_connect),supportsGdprConsentManagement:Boolean(e.supports_gdpr_consent_management),supportsTransferApproval:Boolean(e.supports_transfer_approval),tldMaintenanceEndTime:e.tld_maintenance_end_time,transferAwayEligibleAt:e.transfer_away_eligible_at?String(e.transfer_away_eligible_at):null,transferLockOnWhoisUpdateOptional:Boolean(e.transfer_lock_on_whois_update_optional),type:(0,s.G)(e),transferStatus:_(e),transferStartDate:e.transfer_start_date?String(e.transfer_start_date):null,transferEndDate:n,whoisUpdateUnmodifiableFields:e.whois_update_unmodifiable_fields};var a}}}]);